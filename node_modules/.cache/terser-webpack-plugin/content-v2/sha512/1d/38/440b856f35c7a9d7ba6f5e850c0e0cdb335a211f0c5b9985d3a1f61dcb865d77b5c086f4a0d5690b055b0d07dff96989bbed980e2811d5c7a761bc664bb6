{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{127:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"frontMatter\",(function(){return d})),a.d(t,\"metadata\",(function(){return p})),a.d(t,\"rightToc\",(function(){return b})),a.d(t,\"default\",(function(){return g}));var n,l=a(1),r=a(6),i=(a(0),a(307)),c=a(314),s=a(309),o=a(310),m=a(312),u=a(311),d={last_modified_on:\"2020-07-13\",component_title:\"WASM\",description:\"The Vector `wasm` transform accepts and outputs `log` events, allowing you to execute **experimental** WASM plugins.\",event_types:[\"log\"],function_category:\"program\",issues_url:\"https://github.com/timberio/vector/issues?q=is%3Aopen+is%3Aissue+label%3A%22transform%3A+wasm%22\",operating_systems:[\"Linux\"],sidebar_label:'wasm|[\"log\"]',source_url:\"https://github.com/timberio/vector/tree/master/src/transforms/wasm.rs\",status:\"beta\",title:\"WASM Transform\",unsupported_operating_systems:[\"MacOS\",\"Windows\"]},p={id:\"reference/transforms/wasm\",title:\"WASM Transform\",description:\"The Vector `wasm` transform accepts and outputs `log` events, allowing you to execute **experimental** WASM plugins.\",source:\"@site/docs/reference/transforms/wasm.md\",permalink:\"/docs/reference/transforms/wasm\",editUrl:\"https://github.com/nervosnetwork/muta/edit/master/website/docs/reference/transforms/wasm.md\",sidebar_label:'wasm|[\"log\"]'},b=[{value:\"Requirements\",id:\"requirements\",children:[]},{value:\"Configuration\",id:\"configuration\",children:[]},{value:\"Options\",id:\"options\",children:[{value:\"artifact_cache\",id:\"artifact_cache\",children:[]},{value:\"heap_max_size\",id:\"heap_max_size\",children:[]},{value:\"module\",id:\"module\",children:[]}]},{value:\"Examples\",id:\"examples\",children:[]},{value:\"How It Works\",id:\"how-it-works\",children:[{value:\"Environment Variables\",id:\"environment-variables\",children:[]}]}],h=(n=\"CodeHeader\",function(e){return console.warn(\"Component \"+n+\" was not imported, exported, or provided by MDXProvider as global scope\"),Object(i.b)(\"div\",e)}),f={rightToc:b};function g(e){var t=e.components,a=Object(r.a)(e,[\"components\"]);return Object(i.b)(\"wrapper\",Object(l.a)({},f,a,{components:t,mdxType:\"MDXLayout\"}),Object(i.b)(\"p\",null,\"The Vector \",Object(i.b)(\"inlineCode\",{parentName:\"p\"},\"wasm\"),\" transform\\naccepts and outputs \",Object(i.b)(\"a\",Object(l.a)({parentName:\"p\"},{href:\"/docs/about/data-model/log/\"}),Object(i.b)(\"inlineCode\",{parentName:\"a\"},\"log\")),\" events, allowing you to\\nexecute \",Object(i.b)(\"strong\",{parentName:\"p\"},\"experimental\"),\" WASM plugins.\"),Object(i.b)(\"h2\",{id:\"requirements\"},\"Requirements\"),Object(i.b)(c.a,{icon:!1,type:\"danger\",className:\"list--icons list--icons--warnings\",mdxType:\"Alert\"},Object(i.b)(\"ul\",null,Object(i.b)(\"li\",{parentName:\"ul\"},\"Vector must be build with the \",Object(i.b)(\"inlineCode\",{parentName:\"li\"},\"wasm\"),\" feature. \",Object(i.b)(\"em\",{parentName:\"li\"},\"This is not enabled by default. Review \",Object(i.b)(\"a\",Object(l.a)({parentName:\"em\"},{href:\"https://github.com/timberio/vector/blob/master/CONTRIBUTING.md#setup\"}),\"Building Vector\")),\".\"))),Object(i.b)(\"h2\",{id:\"configuration\"},\"Configuration\"),Object(i.b)(m.a,{block:!0,defaultValue:\"common\",values:[{label:\"Common\",value:\"common\"},{label:\"Advanced\",value:\"advanced\"}],mdxType:\"Tabs\"},Object(i.b)(u.a,{value:\"common\",mdxType:\"TabItem\"},Object(i.b)(\"pre\",null,Object(i.b)(\"code\",Object(l.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[transforms.my_transform_id]\\n  type = \"wasm\" # required\\n  inputs = [\"my-source-or-transform-id\"] # required\\n  artifact_cache = \"/etc/vector/artifacts\" # required\\n  heap_max_size = 10485760 # optional, default\\n  module = \"./modules/example.wasm\" # required\\n'))),Object(i.b)(u.a,{value:\"advanced\",mdxType:\"TabItem\"},Object(i.b)(\"pre\",null,Object(i.b)(\"code\",Object(l.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[transforms.my_transform_id]\\n  type = \"wasm\" # required\\n  inputs = [\"my-source-or-transform-id\"] # required\\n  artifact_cache = \"/etc/vector/artifacts\" # required\\n  heap_max_size = 10485760 # optional, default\\n  module = \"./modules/example.wasm\" # required\\n')))),Object(i.b)(\"h2\",{id:\"options\"},\"Options\"),Object(i.b)(s.a,{filters:!0,mdxType:\"Fields\"},Object(i.b)(o.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"/etc/vector/artifacts\",\"/var/lib/vector/artifacts\",\"C:\\\\vector\\\\artifacts\"],groups:[],name:\"artifact_cache\",path:null,relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h3\",{id:\"artifact_cache\"},\"artifact_cache\"),Object(i.b)(\"p\",null,\"The directory where Vector should store the artifact it builds of this WASM\\nmodule. Typically, all WASM modules share this.\")),Object(i.b)(o.a,{common:!0,defaultValue:10485760,enumValues:null,examples:[10485760],groups:[],name:\"heap_max_size\",path:null,relevantWhen:null,required:!1,templateable:!1,type:\"int\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h3\",{id:\"heap_max_size\"},\"heap_max_size\"),Object(i.b)(\"p\",null,\"The maximum size of the heap of this module, in bytes. (This includes the\\nmodule itself, default is 10 MB.)\")),Object(i.b)(o.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"./modules/example.wasm\",\"/example.wat\",\"example.wasm\"],groups:[],name:\"module\",path:null,relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h3\",{id:\"module\"},\"module\"),Object(i.b)(\"p\",null,\"The file path of the \",Object(i.b)(\"inlineCode\",{parentName:\"p\"},\".wasm\"),\" or \",Object(i.b)(\"inlineCode\",{parentName:\"p\"},\".wat\"),\" module.\"))),Object(i.b)(\"h2\",{id:\"examples\"},\"Examples\"),Object(i.b)(\"p\",null,\"Given the following configuration:\"),Object(i.b)(h,{fileName:\"vector.toml\",mdxType:\"CodeHeader\"}),Object(i.b)(\"pre\",null,Object(i.b)(\"code\",Object(l.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[transforms.test]\\n  inputs = [...]\\n  type = \"wasm\"\\n  module = \"module.wasm\"\\n  artifact_cache = \"artifacts/\"\\n')),Object(i.b)(\"p\",null,\"Accompanied by a \",Object(i.b)(\"inlineCode\",{parentName:\"p\"},\"module.wasm\"),\" file built via \",Object(i.b)(\"inlineCode\",{parentName:\"p\"},\"cargo +nightly --target wasm32-wasi ...\"),\", Vector will use the module as a\\ncustom transform.\"),Object(i.b)(\"h2\",{id:\"how-it-works\"},\"How It Works\"),Object(i.b)(\"h3\",{id:\"environment-variables\"},\"Environment Variables\"),Object(i.b)(\"p\",null,\"Environment variables are supported through all of Vector's configuration.\\nSimply add \",Object(i.b)(\"inlineCode\",{parentName:\"p\"},\"${MY_ENV_VAR}\"),\" in your Vector configuration file and the variable\\nwill be replaced before being evaluated.\"),Object(i.b)(\"p\",null,\"You can learn more in the\\n\",Object(i.b)(\"a\",Object(l.a)({parentName:\"p\"},{href:\"/docs/setup/configuration/#environment-variables\"}),\"Environment Variables\"),\" section.\"))}g.isMDXComponent=!0},309:function(e,t,a){\"use strict\";a(12);var n=a(0),l=a.n(n),r=a(318),i=a(317),c=a(316),s=a.n(c);t.a=function({children:e,filters:t}){const[a,c]=Object(n.useState)(!1),[o,m]=Object(n.useState)(new Set),[u,d]=Object(n.useState)(!1),[p,b]=Object(n.useState)(null);let h=[];e&&(h=Array.isArray(e)?e:[e]);let f=h.some(e=>e.props.common),g=s()(h).flatMap(e=>e.props.groups).uniq().value(),v=h.some(e=>e.props.required),w=h;return a&&(w=w.filter(e=>e.props.common)),o.size>0&&(w=w.filter(e=>Array.from(o).every(t=>e.props.groups.includes(t)))),u&&(w=w.filter(e=>e.props.required)),p&&(w=w.filter(e=>e.props.name.toLowerCase().includes(p.toLowerCase()))),l.a.createElement(l.a.Fragment,null,h.length>1&&!1!==t?l.a.createElement(\"div\",{className:\"filters\"},l.a.createElement(\"div\",{className:\"search\"},l.a.createElement(\"span\",{className:\"search--result-count\"},w.length,\" items\"),l.a.createElement(\"input\",{className:\"input--text input--lg\",type:\"text\",onChange:e=>b(e.currentTarget.value),placeholder:\"\\ud83d\\udd0d Search...\"})),l.a.createElement(\"div\",{className:\"filter\"},l.a.createElement(\"div\",{className:\"filter--choices\"},l.a.createElement(r.a,{values:g,currentState:o,setState:m}),f&&l.a.createElement(\"label\",{title:\"Only show popular/common results\"},l.a.createElement(\"input\",{type:\"checkbox\",onChange:e=>c(e.currentTarget.checked),checked:a}),\"common\"),v&&l.a.createElement(\"label\",{title:\"Only show required results\"},l.a.createElement(\"input\",{type:\"checkbox\",onChange:e=>d(e.currentTarget.checked),checked:u}),\"required\")))):null,!Array.isArray(w)||w.length>0?l.a.createElement(\"ul\",{className:\"connected-list\"},w):l.a.createElement(i.a,{text:\"no components found\"}))}},310:function(e,t,a){\"use strict\";a(12);var n=a(0),l=a.n(n),r=a(306),i=a.n(r),c=(a(307),a(315));function s(e){return e.includes(\".\")?'\"'+e+'\"':e}function o(e){return\"string\"==typeof e&&e.includes(\"\\n\")?`\"\"\"\\n${e}\\n\"\"\"`:JSON.stringify(e)}function m(e,t){return(a=t)&&a.constructor===Object?\"name\"in t&&\"value\"in t?`${s(t.name)} = ${o(t.value)}`:`${s(Object.keys(t)[0])} = ${o(Object.values(t)[0])}`:e?`${s(e)} = ${o(t)}`:o(t);var a}function u({values:e}){let t=[];if(Array.isArray(e))for(var a in e){let n=e[a];t.push(l.a.createElement(\"code\",{key:n},o(n))),t.push(\" \")}else for(var n in e)t.push(l.a.createElement(\"code\",{key:n,className:\"with-info-icon\",title:e[n]},o(n))),t.push(\" \");return t}function d({name:e,path:t,values:a}){let n=\"\";return a.forEach((function(a){t&&(n+=t+\".\"),n+=m(e,a)+\"\\n\"})),l.a.createElement(\"div\",null,l.a.createElement(c.a,{className:\"language-toml\"},n))}function p({unit:e,value:t}){let a=\"\";return e&&(a=l.a.createElement(l.a.Fragment,null,\" (\",e,\")\")),l.a.createElement(l.a.Fragment,null,l.a.createElement(\"code\",null,o(t)),a)}function b({value:e}){let t=Object.keys(e)[0],a=Object.values(e)[0];return\"\"==a&&(a=null),l.a.createElement(\"span\",null,l.a.createElement(\"code\",null,l.a.createElement(\"a\",{href:\"#\"+t},t)),\" \",\"= \",l.a.createElement(\"code\",null,o(a)))}function h({defaultValue:e,enumValues:t,examples:a,groups:r,name:i,path:c,relevantWhen:s,required:o,unit:m,warnings:h}){const[f,g]=Object(n.useState)(!1);return l.a.createElement(\"ul\",{className:\"info\"},h&&h.length>0&&h.map((e,t)=>l.a.createElement(\"li\",{key:t,className:\"warning\"},l.a.createElement(\"i\",{className:\"feather icon-alert-triangle\"}),\" WARNING:\",\" \",e.text)),s&&l.a.createElement(\"li\",null,\"Only \",o?\"required\":\"relevant\",\" when:\",\" \",l.a.createElement(b,{value:s})),void 0!==e?null!==e?l.a.createElement(\"li\",null,\"Default: \",l.a.createElement(p,{unit:m,value:e})):l.a.createElement(\"li\",null,\"No default\"):null,t&&l.a.createElement(\"li\",null,\"Enum, must be one of: \",l.a.createElement(u,{values:t})),(a.length>1||a[0]!=e)&&l.a.createElement(\"li\",null,l.a.createElement(\"div\",{className:\"show-more\",onClick:()=>g(!f)},f?\"Hide examples\":\"View examples\"),f&&l.a.createElement(d,{name:i,path:c,values:a})))}t.a=function({children:e,common:t,defaultValue:a,enumValues:r,examples:c,groups:s,name:o,path:m,relevantWhen:u,required:d,templateable:p,type:b,unit:f,warnings:g}){const[v,w]=Object(n.useState)(!1);let O=e;return v&&(O=O.filter(e=>\"p\"!=e.props.originalType)),l.a.createElement(\"li\",{className:i()({\"field-required\":d,\"field-collapsed\":v}),required:d},l.a.createElement(\"div\",{className:\"badges\"},p&&l.a.createElement(\"span\",{className:\"badge badge--primary with-info-icon\",title:\"This option is dynamic and accepts the Vector template syntax\"},\"templateable\"),b&&l.a.createElement(\"span\",{className:\"badge badge--secondary\"},b,f&&l.a.createElement(l.a.Fragment,null,\" (\",f,\")\")),r&&Object.keys(r).length>0&&l.a.createElement(\"span\",{className:\"badge badge--secondary with-info-icon\",title:\"This option is an enumation and only allows specific values\"},\"enum\"),t&&l.a.createElement(\"span\",{className:\"badge badge--primary with-info-icon\",title:\"This is a popular that we recommend for getting started\"},\"common\"),d?l.a.createElement(\"span\",{className:\"badge badge--danger\"},\"required\",u&&\"*\"):l.a.createElement(\"span\",{className:\"badge badge--secondary\"},\"optional\")),O,!v&&\"table\"!=b&&l.a.createElement(h,{defaultValue:a,enumValues:r,examples:c,groups:s,name:o,path:m,relevantWhen:u,required:d,unit:f,warnings:g}))}},314:function(e,t,a){\"use strict\";var n=a(0),l=a.n(n),r=a(306),i=a.n(r);a(93);t.a=function({children:e,className:t,fill:a,icon:n,rounded:r,type:c}){let s=null;switch(c){case\"danger\":s=\"alert-triangle\";break;case\"success\":s=\"check-circle\";break;case\"warning\":s=\"alert-triangle\";break;default:s=\"info\"}return l.a.createElement(\"div\",{className:i()(t,\"alert\",\"alert--\"+c,{\"alert--fill\":a,\"alert--icon\":!1!==n,\"alert--rounded\":!0===r}),role:\"alert\"},!1!==n&&l.a.createElement(\"i\",{className:i()(\"feather\",\"icon-\"+(n||s))}),e)}}}]);","extractedComments":[]}