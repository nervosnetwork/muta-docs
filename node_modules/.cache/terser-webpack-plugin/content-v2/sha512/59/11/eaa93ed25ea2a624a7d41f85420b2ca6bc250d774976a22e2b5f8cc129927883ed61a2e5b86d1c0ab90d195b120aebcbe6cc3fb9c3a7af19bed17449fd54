{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{192:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"frontMatter\",(function(){return l})),n.d(t,\"metadata\",(function(){return o})),n.d(t,\"rightToc\",(function(){return b})),n.d(t,\"default\",(function(){return i}));var r=n(1),a=n(6),c=(n(0),n(215)),l={id:\"network\",title:\"Network\"},o={id:\"advanced/core/network\",title:\"Network\",description:\"## \\u5f53\\u524d\\u76ee\\u6807\",source:\"@site/docs/advanced/core/network.md\",permalink:\"/new-docs/docs/advanced/core/network\",editUrl:\"https://github.com/nervosnetwork/muta/edit/master/website/docs/advanced/core/network.md\",sidebar:\"docs\",previous:{title:\"Overlord\",permalink:\"/new-docs/docs/advanced/core/overlord\"},next:{title:\"Mempool\",permalink:\"/new-docs/docs/advanced/core/mempool\"}},b=[{value:\"\\u5f53\\u524d\\u76ee\\u6807\",id:\"\\u5f53\\u524d\\u76ee\\u6807\",children:[]},{value:\"\\u6d88\\u606f\\u6536\\u53d1\",id:\"\\u6d88\\u606f\\u6536\\u53d1\",children:[{value:\"\\u8282\\u70b9\\u6d88\\u606f\\u7aef (Endpoint)\",id:\"\\u8282\\u70b9\\u6d88\\u606f\\u7aef-endpoint\",children:[]},{value:\"\\u6d88\\u606f\\u5e8f\\u5217\\u5316\",id:\"\\u6d88\\u606f\\u5e8f\\u5217\\u5316\",children:[]},{value:\"\\u6d88\\u606f\\u5904\\u7406\",id:\"\\u6d88\\u606f\\u5904\\u7406\",children:[]},{value:\"\\u6d88\\u606f\\u5904\\u7406\\u903b\\u8f91\\u6ce8\\u518c\",id:\"\\u6d88\\u606f\\u5904\\u7406\\u903b\\u8f91\\u6ce8\\u518c\",children:[]},{value:\"\\u6d88\\u606f\\u7684\\u53d1\\u9001\",id:\"\\u6d88\\u606f\\u7684\\u53d1\\u9001\",children:[]}]}],s={rightToc:b};function i(e){var t=e.components,n=Object(a.a)(e,[\"components\"]);return Object(c.b)(\"wrapper\",Object(r.a)({},s,n,{components:t,mdxType:\"MDXLayout\"}),Object(c.b)(\"h2\",{id:\"\\u5f53\\u524d\\u76ee\\u6807\"},\"\\u5f53\\u524d\\u76ee\\u6807\"),Object(c.b)(\"p\",null,\"\\u57fa\\u4e8e \",Object(c.b)(\"a\",Object(r.a)({parentName:\"p\"},{href:\"https://github.com/nervosnetwork/p2p\"}),\"tentacle crate\"),\" \\u5b9e\\u73b0\\u4e00\\u4e2a\\u7b80\\u5355\\u7684\\u53ef\\u5de5\\u4f5c\\u7684 P2P \\u7f51\\u7edc\\uff0c\\u4e3b\\u8981\\u529f\\u80fd\\u5982\\u4e0b\\uff1a\"),Object(c.b)(\"ul\",null,Object(c.b)(\"li\",{parentName:\"ul\"},Object(c.b)(\"p\",{parentName:\"li\"},\"\\u8282\\u70b9\\u8eab\\u4efd\"),Object(c.b)(\"ul\",{parentName:\"li\"},Object(c.b)(\"li\",{parentName:\"ul\"},\"PeerID: secp256k1 \\u7684\\u516c\\u94a5\\u6d3e\\u751f\\u51fa\\u7684 ID\\uff0c\",Object(c.b)(\"a\",Object(r.a)({parentName:\"li\"},{href:\"https://crates.io/crates/tentacle-secio\"}),\"tentacle-secio\")),Object(c.b)(\"li\",{parentName:\"ul\"},\"Address: MultiAddress \",Object(c.b)(\"a\",Object(r.a)({parentName:\"li\"},{href:\"https://multiformats.io/multiaddr\"}),\"REF\"),\"\\uff0c\\u53ea\\u652f\\u6301 TCP\"))),Object(c.b)(\"li\",{parentName:\"ul\"},Object(c.b)(\"p\",{parentName:\"li\"},\"\\u8282\\u70b9\\u53d1\\u73b0\"),Object(c.b)(\"ul\",{parentName:\"li\"},Object(c.b)(\"li\",{parentName:\"ul\"},\"bootstrap\\uff0c\",Object(c.b)(\"a\",Object(r.a)({parentName:\"li\"},{href:\"https://crates.io/crates/tentacle-discovery\"}),\"tentacle-discovery\")))),Object(c.b)(\"li\",{parentName:\"ul\"},Object(c.b)(\"p\",{parentName:\"li\"},\"\\u8282\\u70b9\\u8d28\\u91cf\\u7ef4\\u62a4\"),Object(c.b)(\"ul\",{parentName:\"li\"},Object(c.b)(\"li\",{parentName:\"ul\"},\"ping\\uff0c\",Object(c.b)(\"a\",Object(r.a)({parentName:\"li\"},{href:\"https://crates.io/crates/tentacle-ping\"}),\"tentacle-ping\"),\"\\uff0c\\u8d85\\u65f6\\u65ad\\u5f00\"))),Object(c.b)(\"li\",{parentName:\"ul\"},Object(c.b)(\"p\",{parentName:\"li\"},\"\\u8282\\u70b9\\u6301\\u4e45\\u5316\"),Object(c.b)(\"ul\",{parentName:\"li\"},Object(c.b)(\"li\",{parentName:\"ul\"},\"\\u57fa\\u4e8e\\u6587\\u4ef6\\u7684\\u7b80\\u6613\\u6301\\u4e45\\u5316\\uff0c\\u670d\\u52a1\\u9000\\u51fa\\u65f6\\uff0c\\u5c06\\u4fdd\\u5b58\\u8282\\u70b9\\u4fe1\\u606f\\uff0c\\u9ed8\\u8ba4\\u5173\\u95ed\"))),Object(c.b)(\"li\",{parentName:\"ul\"},Object(c.b)(\"p\",{parentName:\"li\"},\"\\u6d88\\u606f\\u5e7f\\u64ad\\u4ee5\\u53ca\\u5355\\u64ad\"),Object(c.b)(\"ul\",{parentName:\"li\"},Object(c.b)(\"li\",{parentName:\"ul\"},\"\\u57fa\\u7840\\u7684\\u5e7f\\u64ad\\u670d\\u52a1\\uff0c\\u4ee5\\u53ca\\u57fa\\u4e8e secp256k1 \\u516c\\u94a5\\u5730\\u5740\\u7684\\u5355\\u64ad\"))),Object(c.b)(\"li\",{parentName:\"ul\"},Object(c.b)(\"p\",{parentName:\"li\"},\"\\u6d88\\u606f\\u52a0\\u5bc6\\u4f20\\u8f93\"),Object(c.b)(\"ul\",{parentName:\"li\"},Object(c.b)(\"li\",{parentName:\"ul\"},\"\\u57fa\\u4e8e \",Object(c.b)(\"a\",Object(r.a)({parentName:\"li\"},{href:\"https://crates.io/crates/tentacle-secio\"}),\"tentacle-secio\")))),Object(c.b)(\"li\",{parentName:\"ul\"},Object(c.b)(\"p\",{parentName:\"li\"},\"\\u5176\\u4ed6\"),Object(c.b)(\"ul\",{parentName:\"li\"},Object(c.b)(\"li\",{parentName:\"ul\"},\"\\u6d88\\u606f\\u4f18\\u5148\\u7ea7: \\u4f7f\\u7528 tentacle \\u81ea\\u5e26\\u7684\\u6d88\\u606f\\u53d1\\u9001\\u4f18\\u5148\\u7ea7\\uff0c\\u76ee\\u524d\\u53ea\\u6709\\u4e24\\u79cd\\uff0cHigh \\u548c Normal\"),Object(c.b)(\"li\",{parentName:\"ul\"},\"\\u6d88\\u606f\\u538b\\u7f29: \\u4f7f\\u7528 snappy\"),Object(c.b)(\"li\",{parentName:\"ul\"},\"\\u6d88\\u606f\\u5904\\u7406: \\u57fa\\u4e8e handler \\u6ce8\\u518c\\u5f62\\u5f0f\\uff0c\\u7531\\u5404\\u4e2a\\u6a21\\u5757\\u81ea\\u5b9a\\u4e49\\u63a5\\u53d7\\u6d88\\u606f\\u5904\\u7406\\u903b\\u8f91\")))),Object(c.b)(\"h2\",{id:\"\\u6d88\\u606f\\u6536\\u53d1\"},\"\\u6d88\\u606f\\u6536\\u53d1\"),Object(c.b)(\"h3\",{id:\"\\u8282\\u70b9\\u6d88\\u606f\\u7aef-endpoint\"},\"\\u8282\\u70b9\\u6d88\\u606f\\u7aef (Endpoint)\"),Object(c.b)(\"p\",null,\"\\u8282\\u70b9\\u901a\\u8fc7\\u6ce8\\u518c\\u6d88\\u606f\\u7aef\\u5730\\u5740\\u5bf9\\u5916\\u66b4\\u9732\\u670d\\u52a1\\uff0c\\u5b9e\\u73b0\\u6d88\\u606f\\u63a5\\u53d7\\u53ca\\u5904\\u7406\\u3002\\u76ee\\u524d\\u63d0\\u4f9b\\u4e09\\u79cd\\u7c7b\\u578b\\u7684\\u5730\\u5740\\uff1a\"),Object(c.b)(\"h4\",{id:\"gossip\"},\"Gossip\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-text\"}),\"/gossip/[service_name]/[message_name]\\n\")),Object(c.b)(\"p\",null,\"\\u6d88\\u606f\\u5355\\u5411\\u5e7f\\u64ad\\u4ee5\\u53ca\\u5355\\u64ad\"),Object(c.b)(\"h4\",{id:\"rpc-call\"},\"RPC Call\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-text\"}),\"/rpc_call/[service_name]/[message_name]\\n\")),Object(c.b)(\"h4\",{id:\"rpc-response\"},\"RPC Response\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-text\"}),\"/rpc_resp/[service_name]/[message_name]\\n\")),Object(c.b)(\"p\",null,\"RPC \\u7528\\u4e8e\\u8282\\u70b9\\u4e4b\\u95f4\\u7684\\u6d88\\u606f\\u4ea4\\u4e92\\u901a\\u4fe1\\uff0cRPC Call \\u53d1\\u9001\\u8bf7\\u6c42\\uff0cRPC Response \\u8fd4\\u56de\\u3002\"),Object(c.b)(\"h3\",{id:\"\\u6d88\\u606f\\u5e8f\\u5217\\u5316\"},\"\\u6d88\\u606f\\u5e8f\\u5217\\u5316\"),Object(c.b)(\"p\",null,\"\\u5e8f\\u5217\\u5316\\u91c7\\u7528 protobuf \\uff0c\\u6d88\\u606f\\u9700\\u8981\\u5b9e\\u73b0 MessageCodec trait \\u3002\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"#[async_trait]\\npub trait MessageCodec: Sized + Send + Debug + 'static {\\n    async fn encode(&mut self) -> ProtocolResult<Bytes>;\\n\\n    async fn decode(bytes: Bytes) -> ProtocolResult<Self>;\\n}\\n\")),Object(c.b)(\"p\",null,\"\\u76ee\\u524d\\u9488\\u5bf9\\u5b9e\\u73b0\\u4e86 serde Serialize \\u548c Deserialize trait \\u7684\\u6d88\\u606f\\u81ea\\u52a8\\u5b9e\\u73b0\\u4e86 MessageCodec \\uff0c\\n\\u91c7\\u7528 bincode \\u4f5c\\u4e3a\\u4e2d\\u95f4\\u5e8f\\u5217\\u5316\\u8fc7\\u6e21\\u3002\"),Object(c.b)(\"h3\",{id:\"\\u6d88\\u606f\\u5904\\u7406\"},\"\\u6d88\\u606f\\u5904\\u7406\"),Object(c.b)(\"p\",null,\"\\u6d88\\u606f\\u5904\\u7406\\u9700\\u8981\\u5b9e\\u73b0 MessageHandler trait\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"#[async_trait]\\npub trait MessageHandler: Sync + Send + 'static {\\n    type Message: MessageCodec;\\n\\n    async fn process(&self, ctx: Context, msg: Self::Message) -> ProtocolResult<()>;\\n}\\n\")),Object(c.b)(\"h3\",{id:\"\\u6d88\\u606f\\u5904\\u7406\\u903b\\u8f91\\u6ce8\\u518c\"},\"\\u6d88\\u606f\\u5904\\u7406\\u903b\\u8f91\\u6ce8\\u518c\"),Object(c.b)(\"p\",null,\"\\u5b8c\\u6210\\u4e0a\\u8ff0\\u5b9e\\u73b0\\u4e4b\\u540e\\uff0c\\u53ef\\u901a\\u8fc7\\u5982\\u4e0b\\u63a5\\u53e3\\uff0c\\u5b8c\\u6210\\u6d88\\u606f\\u903b\\u8f91\\u5904\\u7406\\u7684\\u6ce8\\u518c\\u3002\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"pub fn register_endpoint_handler<M>(\\n    &mut self,\\n    end: &str,\\n    handler: Box<dyn MessageHandler<Message = M>>,\\n) -> ProtocolResult<()>\\nwhere\\n    M: MessageCodec;\\n\\npub fn register_rpc_response<M>(&mut self, end: &str) -> ProtocolResult<()>\\nwhere\\n    M: MessageCodec;\\n\")),Object(c.b)(\"p\",null,Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"Gossip\"),\" \\u548c \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"RPC Call\"),\" \\u90fd\\u9700\\u8981\\u901a\\u8fc7 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"register_endpoint_handler\"),\" \\u5b8c\\u6210\\u6ce8\\u518c\\uff0c\\n\\u800c \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"RPC Response\"),\" \\u9700\\u8981\\u901a\\u8fc7 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"register_rpc_response\"),\" \\u5b8c\\u6210\\u6ce8\\u518c\\u3002\"),Object(c.b)(\"p\",null,\"\\u672a\\u6765\\u8ba1\\u5212\\u5c06 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"RPC Response\"),\" \\u6ce8\\u518c\\u53bb\\u6389\\u3002\"),Object(c.b)(\"p\",null,Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"end\"),\" \\u5373\\u7b7e\\u540d\\u63d0\\u5230\\u7684\\u8282\\u70b9\\u6d88\\u606f\\u7aef \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"Endpoint\"),\" \\u7f29\\u5199\\u3002\"),Object(c.b)(\"h3\",{id:\"\\u6d88\\u606f\\u7684\\u53d1\\u9001\"},\"\\u6d88\\u606f\\u7684\\u53d1\\u9001\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(r.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"#[async_trait]\\npub trait Gossip: Send + Sync {\\n    async fn broadcast<M>(&self, cx: Context, end: &str, msg: M, p: Priority) -> ProtocolResult<()>\\n    where\\n        M: MessageCodec;\\n\\n    async fn users_cast<M>(\\n        &self,\\n        cx: Context,\\n        end: &str,\\n        users: Vec<UserAddress>,\\n        msg: M,\\n        p: Priority,\\n    ) -> ProtocolResult<()>\\n    where\\n        M: MessageCodec;\\n}\\n\\n#[async_trait]\\npub trait Rpc: Send + Sync {\\n    async fn call<M, R>(&self, ctx: Context, end: &str, msg: M, pri: Priority) -> ProtocolResult<R>\\n    where\\n        M: MessageCodec,\\n        R: MessageCodec;\\n\\n    async fn response<M>(&self, cx: Context, end: &str, msg: M, p: Priority) -> ProtocolResult<()>\\n    where\\n        M: MessageCodec;\\n}\\n\")),Object(c.b)(\"p\",null,\"\\u5982\\u4e0a\\u8ff0\\u5b9a\\u4e49\\uff0c\\u7f51\\u8def\\u670d\\u52a1\\u5b9e\\u4f8b\\u5316\\u540e\\uff0c\\u53ef\\u901a\\u8fc7\\u8c03\\u7528 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"handle()\"),\" \\u83b7\\u53d6\\u4e00\\u4e2a\\u7f51\\u7edc\\u670d\\u52a1\\u5f15\\u7528\\uff0c\\u8be5\\n\",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"handle\"),\" \\u5b9e\\u73b0\\u4e86\\u4e0a\\u8ff0\\u7684\\u63a5\\u53e3\\uff0c\\u540c\\u65f6\\u5b9e\\u73b0\\u4e86 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"Clone\"),\"\\u3002\\u5404\\u6a21\\u5757\\u53ef\\u4ee5\\u901a\\u8fc7\\u5b83\\u6765\\u5b8c\\u6210\\u6d88\\u606f\\u7684\\n\\u53d1\\u9001\\u3002\"),Object(c.b)(\"p\",null,\"\\u6ce8\\u610f\\uff1a\",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"UserAddress\"),\" \\u76ee\\u524d\\u540c \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"tentacle-secio\"),\" \\u63d0\\u4f9b\\u7684 secp256k1 \\u516c\\u94a5\\u7ed1\\u5b9a\\u3002\"))}i.isMDXComponent=!0},215:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return p})),n.d(t,\"b\",(function(){return O}));var r=n(0),a=n.n(r);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=a.a.createContext({}),i=function(e){var t=a.a.useContext(s),n=t;return e&&(n=\"function\"==typeof e?e(t):o({},t,{},e)),n},p=function(e){var t=i(e.components);return a.a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:\"code\",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,c=e.originalType,l=e.parentName,s=b(e,[\"components\",\"mdxType\",\"originalType\",\"parentName\"]),p=i(n),u=r,O=p[\"\".concat(l,\".\").concat(u)]||p[u]||d[u]||c;return n?a.a.createElement(O,o({ref:t},s,{components:n})):a.a.createElement(O,o({ref:t},s))}));function O(e,t){var n=arguments,r=t&&t.mdxType;if(\"string\"==typeof e||r){var c=n.length,l=new Array(c);l[0]=u;var o={};for(var b in t)hasOwnProperty.call(t,b)&&(o[b]=t[b]);o.originalType=e,o.mdxType=\"string\"==typeof e?e:r,l[1]=o;for(var s=2;s<c;s++)l[s]=n[s];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}u.displayName=\"MDXCreateElement\"}}]);","extractedComments":[]}