{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{169:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"frontMatter\",(function(){return c})),r.d(t,\"metadata\",(function(){return a})),r.d(t,\"rightToc\",(function(){return s})),r.d(t,\"default\",(function(){return l}));var n=r(1),i=r(6),o=(r(0),r(251)),c={title:\"Authorization Service\"},a={id:\"service-list/auth-service\",title:\"Authorization Service\",description:\"Authorization Service \\u662f\\u88ab\\u4ea4\\u6613\\u6c60\\u8c03\\u7528\\uff0c\\u5bf9\\u4ea4\\u6613\\u8fdb\\u884c\\u68c0\\u67e5\\u7684 service\\u3002Authorization Service \\u672c\\u8eab\\u4e0d\\u63d0\\u4f9b\\u4efb\\u4f55\\u7684\\u68c0\\u67e5\\u903b\\u8f91\\uff0c\\u800c\\u662f\\u53bb\\u8c03\\u7528\\u6ce8\\u518c\\u5728\\u5176\\u4e2d\\u7684 service \\u53ca\\u5176\\u5bf9\\u5e94\\u7684\\u65b9\\u6cd5\\u8fdb\\u884c\\u6821\\u9a8c\\u3002\",source:\"@site/docs/service-list/auth-service.md\",permalink:\"/new-docs/docs/service-list/auth-service\",editUrl:\"https://github.com/nervosnetwork/muta/edit/master/website/docs/service-list/auth-service.md\",sidebar:\"docs\",previous:{title:\"Asset Service\",permalink:\"/new-docs/docs/service-list/asset-service\"},next:{title:\"Multi-signature Service\",permalink:\"/new-docs/docs/service-list/multi-sig-service\"}},s=[{value:\"\\u5177\\u4f53\\u8bbe\\u8ba1\",id:\"\\u5177\\u4f53\\u8bbe\\u8ba1\",children:[]},{value:\"\\u521d\\u59cb\\u5316 Authorization Service\",id:\"\\u521d\\u59cb\\u5316-authorization-service\",children:[]},{value:\"\\u5b9e\\u73b0 check_authorization\",id:\"\\u5b9e\\u73b0-check_authorization\",children:[]}],u={rightToc:s};function l(e){var t=e.components,r=Object(i.a)(e,[\"components\"]);return Object(o.b)(\"wrapper\",Object(n.a)({},u,r,{components:t,mdxType:\"MDXLayout\"}),Object(o.b)(\"p\",null,\"Authorization Service \\u662f\\u88ab\\u4ea4\\u6613\\u6c60\\u8c03\\u7528\\uff0c\\u5bf9\\u4ea4\\u6613\\u8fdb\\u884c\\u68c0\\u67e5\\u7684 service\\u3002Authorization Service \\u672c\\u8eab\\u4e0d\\u63d0\\u4f9b\\u4efb\\u4f55\\u7684\\u68c0\\u67e5\\u903b\\u8f91\\uff0c\\u800c\\u662f\\u53bb\\u8c03\\u7528\\u6ce8\\u518c\\u5728\\u5176\\u4e2d\\u7684 service \\u53ca\\u5176\\u5bf9\\u5e94\\u7684\\u65b9\\u6cd5\\u8fdb\\u884c\\u6821\\u9a8c\\u3002\"),Object(o.b)(\"h2\",{id:\"\\u5177\\u4f53\\u8bbe\\u8ba1\"},\"\\u5177\\u4f53\\u8bbe\\u8ba1\"),Object(o.b)(\"p\",null,\"Authorization Service \\u7684\\u7ed3\\u6784\\u5982\\u4e0b\\u6240\\u793a\\uff1a\"),Object(o.b)(\"pre\",null,Object(o.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"pub struct AuthorizationService<SDK> {\\n    sdk:          SDK,\\n    verified_list: Box<dyn StoreArray<String, String>>,\\n}\\n\")),Object(o.b)(\"p\",null,\"\\u4ece\\u7ed3\\u6784\\u4e2d\\u53ef\\u4ee5\\u770b\\u51fa\\uff0cAuthorization Service \\u4e3b\\u8981\\u662f\\u7ef4\\u62a4\\u4e86\\u4e00\\u4e2a \",Object(o.b)(\"inlineCode\",{parentName:\"p\"},\"verifiied_list\"),\"\\u3002\\n\",Object(o.b)(\"inlineCode\",{parentName:\"p\"},\"verified_list\"),\" \\u662f\\u4e00\\u4e2a\\uff08service \\u540d\\u5b57 \\u2014 \\u65b9\\u6cd5\\u540d\\u5b57\\uff09\\u7684\\u6570\\u7ec4\\u3002\"),Object(o.b)(\"p\",null,Object(o.b)(\"img\",Object(n.a)({parentName:\"p\"},{src:\"/static/docs-img/auth.svg\",alt:\"auth-service\"}))),Object(o.b)(\"p\",null,\"\\u5982\\u4e0a\\u56fe\\u6240\\u793a\\uff0c\\u5f53\\u4ea4\\u6613\\u6c60\\u6536\\u5230\\u4ea4\\u6613\\u7684\\u65f6\\u5019\\uff0c\\u4ea4\\u6613\\u6c60\\u4f1a\\u8c03\\u7528 Authorization Service\\uff0c\\u5c06\\u4ea4\\u6613\\u5e8f\\u5217\\u5316\\u4e4b\\u540e\\u53d1\\u7ed9 Authorization Service\\u3002\\n\\u8fd9\\u65f6 Authorization Service \\u7684 check_authorization \\u65b9\\u6cd5\\u4f1a\\u88ab\\u8c03\\u7528\\u3002\\n\\u56e0\\u4e3a Authorization Service \\u5e76\\u4e0d\\u6e05\\u695a\\u5176\\u4ed6 service \\u7684\\u5b9e\\u73b0\\uff0c\\u6240\\u4ee5\\u6ce8\\u518c\\u8fdb\\u6765\\u7684\\u65b9\\u6cd5\\u7684 payload \\u90fd\\u53ea\\u80fd\\u63a5\\u6536 \",Object(o.b)(\"inlineCode\",{parentName:\"p\"},\"SignedTransaction\"),\" \\u5e8f\\u5217\\u5316\\u6210\\u7684 Json \\u5b57\\u7b26\\u4e32\\u4f5c\\u4e3a\\u53c2\\u6570\\uff0c\\u800c\\u8fd4\\u56de\\u503c\\u5fc5\\u987b\\u662f \",Object(o.b)(\"inlineCode\",{parentName:\"p\"},\"ServiceResponse<()>\"),\"\\u3002\\n\\u5f53\\u8fd4\\u56de\\u7ed3\\u679c\\u7684\\u8c03\\u7528 \",Object(o.b)(\"inlineCode\",{parentName:\"p\"},\"is_error()\"),\" \\u65b9\\u6cd5\\u8fd4\\u56de\\u771f\\u7684\\u65f6\\u5019\\uff0c\\u5219\\u5224\\u5b9a\\u4ea4\\u6613\\u4e0d\\u5408\\u6cd5\\u3002\\u6ce8\\u518c\\u8fdb Authorization Service \\u7684\\u65b9\\u6cd5\\u5fc5\\u987b\\u9075\\u5faa\\u4e0a\\u8ff0\\u89c4\\u8303\\u3002\"),Object(o.b)(\"h2\",{id:\"\\u521d\\u59cb\\u5316-authorization-service\"},\"\\u521d\\u59cb\\u5316 Authorization Service\"),Object(o.b)(\"p\",null,\"Authorization Service \\u7684\\u521d\\u59cb\\u5316\\u5c31\\u548c\\u666e\\u901a\\u7684 Service \\u4e00\\u6837\\uff0c\\u9700\\u8981\\u5728 new \\u4e00\\u4e2a\\u5b9e\\u4f8b\\u7684\\u65f6\\u5019\\uff0c\\u5c06\\u5176\\u4ed6\\u7684 Service \\u4f9d\\u8d56\\u4f20\\u9012\\u8fdb\\u53bb\\u3002\"),Object(o.b)(\"pre\",null,Object(o.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"pub fn new(_sdk: SDK, multi_sig: MultiSignatureService<SDK>, admission_control: AC) -> Self {\\n        Self {\\n            _sdk,\\n            multi_sig,\\n            admission_control,\\n        }\\n    }\\n\\n\")),Object(o.b)(\"h2\",{id:\"\\u5b9e\\u73b0-check_authorization\"},\"\\u5b9e\\u73b0 check_authorization\"),Object(o.b)(\"p\",null,\"\\u6839\\u636e\\u81ea\\u8eab\\u7684\\u4e1a\\u52a1\\u903b\\u8f91\\u9700\\u6c42\\uff0c\\u521b\\u5efa check_authorization \\u51fd\\u6570\\uff0c\\u5b9e\\u73b0\\u4ee3\\u7801\\u5373\\u53ef\\u3002\"),Object(o.b)(\"pre\",null,Object(o.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-rust\"}),'#[read]\\n    fn check_authorization(\\n        &self,\\n        ctx: ServiceContext,\\n        payload: SignedTransaction,\\n    ) -> ServiceResponse<()> {\\n        let resp = self\\n            .multi_sig\\n            .verify_signature(ctx.clone(), payload.clone());\\n        if resp.is_error() {\\n            return ServiceResponse::<()>::from_error(\\n                102,\\n                format!(\\n                    \"verify transaction signature error {:?}\",\\n                    resp.error_message\\n                ),\\n            );\\n        }\\n\\n        if !self.admission_control.is_allowed(&ctx, payload) {\\n            return ServiceResponse::<()>::from_error(\\n                102,\\n                \"The transaction is not allowed\".to_owned(),\\n            );\\n        }\\n\\n        ServiceResponse::from_succeed(())\\n    }\\n')))}l.isMDXComponent=!0},251:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return p})),r.d(t,\"b\",(function(){return d}));var n=r(0),i=r.n(n);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var u=i.a.createContext({}),l=function(e){var t=i.a.useContext(u),r=t;return e&&(r=\"function\"==typeof e?e(t):a({},t,{},e)),r},p=function(e){var t=l(e.components);return i.a.createElement(u.Provider,{value:t},e.children)},b={inlineCode:\"code\",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},v=Object(n.forwardRef)((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,u=s(e,[\"components\",\"mdxType\",\"originalType\",\"parentName\"]),p=l(r),v=n,d=p[\"\".concat(c,\".\").concat(v)]||p[v]||b[v]||o;return r?i.a.createElement(d,a({ref:t},u,{components:r})):i.a.createElement(d,a({ref:t},u))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if(\"string\"==typeof e||n){var o=r.length,c=new Array(o);c[0]=v;var a={};for(var s in t)hasOwnProperty.call(t,s)&&(a[s]=t[s]);a.originalType=e,a.mdxType=\"string\"==typeof e?e:n,c[1]=a;for(var u=2;u<o;u++)c[u]=r[u];return i.a.createElement.apply(null,c)}return i.a.createElement.apply(null,r)}v.displayName=\"MDXCreateElement\"}}]);","extractedComments":[]}