{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{204:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"frontMatter\",(function(){return m})),n.d(t,\"metadata\",(function(){return u})),n.d(t,\"rightToc\",(function(){return d})),n.d(t,\"default\",(function(){return b}));var a=n(1),l=n(6),i=(n(0),n(307)),r=n(309),c=n(310),s=n(312),o=n(311),m={last_modified_on:\"2020-07-13\",delivery_guarantee:\"at_least_once\",component_title:\"File\",description:\"The Vector `file` sink streams `log` events to a file.\",event_types:[\"log\"],function_category:\"transmit\",issues_url:\"https://github.com/timberio/vector/issues?q=is%3Aopen+is%3Aissue+label%3A%22sink%3A+file%22\",operating_systems:[\"Linux\",\"MacOS\",\"Windows\"],sidebar_label:'file|[\"log\"]',source_url:\"https://github.com/timberio/vector/tree/master/src/sinks/file\",status:\"prod-ready\",title:\"File Sink\",unsupported_operating_systems:[]},u={id:\"reference/sinks/file\",title:\"File Sink\",description:\"The Vector `file` sink streams `log` events to a file.\",source:\"@site/docs/reference/sinks/file.md\",permalink:\"/docs/reference/sinks/file\",editUrl:\"https://github.com/nervosnetwork/muta/edit/master/website/docs/reference/sinks/file.md\",sidebar_label:'file|[\"log\"]'},d=[{value:\"Configuration\",id:\"configuration\",children:[{value:\"encoding\",id:\"encoding\",children:[]},{value:\"healthcheck\",id:\"healthcheck\",children:[]},{value:\"idle_timeout_secs\",id:\"idle_timeout_secs\",children:[]},{value:\"path\",id:\"path\",children:[]}]},{value:\"How It Works\",id:\"how-it-works\",children:[{value:\"Dynamic File And Directory Creation\",id:\"dynamic-file-and-directory-creation\",children:[]},{value:\"Environment Variables\",id:\"environment-variables\",children:[]},{value:\"Streaming\",id:\"streaming\",children:[]},{value:\"Template Syntax\",id:\"template-syntax\",children:[]}]}],p={rightToc:d};function b(e){var t=e.components,n=Object(l.a)(e,[\"components\"]);return Object(i.b)(\"wrapper\",Object(a.a)({},p,n,{components:t,mdxType:\"MDXLayout\"}),Object(i.b)(\"p\",null,\"The Vector \",Object(i.b)(\"inlineCode\",{parentName:\"p\"},\"file\"),\" sink\\n\",Object(i.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"#streaming\"}),\"streams\"),\" \",Object(i.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"/docs/about/data-model/log/\"}),Object(i.b)(\"inlineCode\",{parentName:\"a\"},\"log\")),\" events to a file.\"),Object(i.b)(\"h2\",{id:\"configuration\"},\"Configuration\"),Object(i.b)(s.a,{block:!0,defaultValue:\"common\",values:[{label:\"Common\",value:\"common\"},{label:\"Advanced\",value:\"advanced\"}],mdxType:\"Tabs\"},Object(i.b)(o.a,{value:\"common\",mdxType:\"TabItem\"},Object(i.b)(\"pre\",null,Object(i.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[sinks.my_sink_id]\\n  # General\\n  type = \"file\" # required\\n  inputs = [\"my-source-or-transform-id\"] # required\\n  healthcheck = true # optional, default\\n  path = \"vector-%Y-%m-%d.log\" # required\\n\\n  # Encoding\\n  encoding.codec = \"ndjson\" # required\\n'))),Object(i.b)(o.a,{value:\"advanced\",mdxType:\"TabItem\"},Object(i.b)(\"pre\",null,Object(i.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[sinks.my_sink_id]\\n  # General\\n  type = \"file\" # required\\n  inputs = [\"my-source-or-transform-id\"] # required\\n  healthcheck = true # optional, default\\n  idle_timeout_secs = \"30\" # optional, default\\n  path = \"vector-%Y-%m-%d.log\" # required\\n\\n  # Encoding\\n  encoding.codec = \"ndjson\" # required\\n  encoding.except_fields = [\"timestamp\", \"message\", \"host\"] # optional, no default\\n  encoding.only_fields = [\"timestamp\", \"message\", \"host\"] # optional, no default\\n  encoding.timestamp_format = \"rfc3339\" # optional, default\\n')))),Object(i.b)(r.a,{filters:!0,mdxType:\"Fields\"},Object(i.b)(c.a,{common:!0,defaultValue:null,enumValues:null,examples:[],groups:[],name:\"encoding\",path:null,relevantWhen:null,required:!0,templateable:!1,type:\"table\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h3\",{id:\"encoding\"},\"encoding\"),Object(i.b)(\"p\",null,\"Configures the encoding specific sink behavior.\"),Object(i.b)(r.a,{filters:!1,mdxType:\"Fields\"},Object(i.b)(c.a,{common:!0,defaultValue:null,enumValues:{ndjson:\"Each event is encoded into JSON and the payload is new line delimited.\",text:\"Each event is encoded into text via the `message` key and the payload is new line delimited.\"},examples:[\"ndjson\",\"text\"],groups:[],name:\"codec\",path:\"encoding\",relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h4\",{id:\"codec\"},\"codec\"),Object(i.b)(\"p\",null,\"The encoding codec used to serialize the events before outputting.\")),Object(i.b)(c.a,{common:!1,defaultValue:null,enumValues:null,examples:[[\"timestamp\",\"message\",\"host\"]],groups:[],name:\"except_fields\",path:\"encoding\",relevantWhen:null,required:!1,templateable:!1,type:\"[string]\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h4\",{id:\"except_fields\"},\"except_fields\"),Object(i.b)(\"p\",null,\"Prevent the sink from encoding the specified labels.\")),Object(i.b)(c.a,{common:!1,defaultValue:null,enumValues:null,examples:[[\"timestamp\",\"message\",\"host\"]],groups:[],name:\"only_fields\",path:\"encoding\",relevantWhen:null,required:!1,templateable:!1,type:\"[string]\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h4\",{id:\"only_fields\"},\"only_fields\"),Object(i.b)(\"p\",null,\"Limit the sink to only encoding the specified labels.\")),Object(i.b)(c.a,{common:!1,defaultValue:\"rfc3339\",enumValues:{rfc3339:\"Format as an RFC3339 string\",unix:\"Format as a unix timestamp, can be parsed as a Clickhouse DateTime\"},examples:[\"rfc3339\",\"unix\"],groups:[],name:\"timestamp_format\",path:\"encoding\",relevantWhen:null,required:!1,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h4\",{id:\"timestamp_format\"},\"timestamp_format\"),Object(i.b)(\"p\",null,\"How to format event timestamps.\")))),Object(i.b)(c.a,{common:!0,defaultValue:!0,enumValues:null,examples:[!0,!1],groups:[],name:\"healthcheck\",path:null,relevantWhen:null,required:!1,templateable:!1,type:\"bool\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h3\",{id:\"healthcheck\"},\"healthcheck\"),Object(i.b)(\"p\",null,\"Enables/disables the sink healthcheck upon start.\")),Object(i.b)(c.a,{common:!1,defaultValue:\"30\",enumValues:null,examples:[\"30\"],groups:[],name:\"idle_timeout_secs\",path:null,relevantWhen:null,required:!1,templateable:!1,type:\"uint\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h3\",{id:\"idle_timeout_secs\"},\"idle_timeout_secs\"),Object(i.b)(\"p\",null,\"The amount of time a file can be idle  and stay open. After not receiving any\\nevents for this timeout, the file will be flushed and closed.\")),Object(i.b)(c.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"vector-%Y-%m-%d.log\",\"application-{{ application_id }}-%Y-%m-%d.log\"],groups:[],name:\"path\",path:null,relevantWhen:null,required:!0,templateable:!0,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(i.b)(\"h3\",{id:\"path\"},\"path\"),Object(i.b)(\"p\",null,\"File name to write events to.\\nSee \",Object(i.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"#template-syntax\"}),\"Template Syntax\"),\" for more info.\"))),Object(i.b)(\"h2\",{id:\"how-it-works\"},\"How It Works\"),Object(i.b)(\"h3\",{id:\"dynamic-file-and-directory-creation\"},\"Dynamic File And Directory Creation\"),Object(i.b)(\"p\",null,\"Vector will attempt to create the entire directory structure and the file when\\nemitting events to the file sink. This requires that the Vector agent have\\nthe correct permissions to create and write to files in the specified directories.\"),Object(i.b)(\"h3\",{id:\"environment-variables\"},\"Environment Variables\"),Object(i.b)(\"p\",null,\"Environment variables are supported through all of Vector's configuration.\\nSimply add \",Object(i.b)(\"inlineCode\",{parentName:\"p\"},\"${MY_ENV_VAR}\"),\" in your Vector configuration file and the variable\\nwill be replaced before being evaluated.\"),Object(i.b)(\"p\",null,\"You can learn more in the\\n\",Object(i.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"/docs/setup/configuration/#environment-variables\"}),\"Environment Variables\"),\" section.\"),Object(i.b)(\"h3\",{id:\"streaming\"},\"Streaming\"),Object(i.b)(\"p\",null,\"The \",Object(i.b)(\"inlineCode\",{parentName:\"p\"},\"file\"),\" sink streams data on a real-time\\nevent-by-event basis. It does not batch data.\"),Object(i.b)(\"h3\",{id:\"template-syntax\"},\"Template Syntax\"),Object(i.b)(\"p\",null,\"The \",Object(i.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"#path\"}),Object(i.b)(\"inlineCode\",{parentName:\"a\"},\"path\")),\" options\\nsupport \",Object(i.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"/docs/reference/templating/\"}),\"Vector's template syntax\"),\", enabling dynamic\\nvalues derived from the event's data. This syntax accepts\\n\",Object(i.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"https://docs.rs/chrono/0.4.11/chrono/format/strftime/index.html#specifiers\"}),\"strptime specifiers\"),\" as well as the\\n\",Object(i.b)(\"inlineCode\",{parentName:\"p\"},\"{{ field_name }}\"),\" syntax for accessing event fields. For example:\"),Object(i.b)(\"pre\",null,Object(i.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[sinks.my_file_sink_id]\\n  # ...\\n  path = \"vector-%Y-%m-%d.log\"\\n  path = \"application-{{ application_id }}-%Y-%m-%d.log\"\\n  # ...\\n')),Object(i.b)(\"p\",null,\"You can learn more about the complete syntax in the\\n\",Object(i.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"/docs/reference/templating/\"}),\"templating reference\"),\".\"))}b.isMDXComponent=!0},309:function(e,t,n){\"use strict\";n(12);var a=n(0),l=n.n(a),i=n(318),r=n(317),c=n(316),s=n.n(c);t.a=function({children:e,filters:t}){const[n,c]=Object(a.useState)(!1),[o,m]=Object(a.useState)(new Set),[u,d]=Object(a.useState)(!1),[p,b]=Object(a.useState)(null);let h=[];e&&(h=Array.isArray(e)?e:[e]);let f=h.some(e=>e.props.common),g=s()(h).flatMap(e=>e.props.groups).uniq().value(),v=h.some(e=>e.props.required),y=h;return n&&(y=y.filter(e=>e.props.common)),o.size>0&&(y=y.filter(e=>Array.from(o).every(t=>e.props.groups.includes(t)))),u&&(y=y.filter(e=>e.props.required)),p&&(y=y.filter(e=>e.props.name.toLowerCase().includes(p.toLowerCase()))),l.a.createElement(l.a.Fragment,null,h.length>1&&!1!==t?l.a.createElement(\"div\",{className:\"filters\"},l.a.createElement(\"div\",{className:\"search\"},l.a.createElement(\"span\",{className:\"search--result-count\"},y.length,\" items\"),l.a.createElement(\"input\",{className:\"input--text input--lg\",type:\"text\",onChange:e=>b(e.currentTarget.value),placeholder:\"\\ud83d\\udd0d Search...\"})),l.a.createElement(\"div\",{className:\"filter\"},l.a.createElement(\"div\",{className:\"filter--choices\"},l.a.createElement(i.a,{values:g,currentState:o,setState:m}),f&&l.a.createElement(\"label\",{title:\"Only show popular/common results\"},l.a.createElement(\"input\",{type:\"checkbox\",onChange:e=>c(e.currentTarget.checked),checked:n}),\"common\"),v&&l.a.createElement(\"label\",{title:\"Only show required results\"},l.a.createElement(\"input\",{type:\"checkbox\",onChange:e=>d(e.currentTarget.checked),checked:u}),\"required\")))):null,!Array.isArray(y)||y.length>0?l.a.createElement(\"ul\",{className:\"connected-list\"},y):l.a.createElement(r.a,{text:\"no components found\"}))}},310:function(e,t,n){\"use strict\";n(12);var a=n(0),l=n.n(a),i=n(306),r=n.n(i),c=(n(307),n(315));function s(e){return e.includes(\".\")?'\"'+e+'\"':e}function o(e){return\"string\"==typeof e&&e.includes(\"\\n\")?`\"\"\"\\n${e}\\n\"\"\"`:JSON.stringify(e)}function m(e,t){return(n=t)&&n.constructor===Object?\"name\"in t&&\"value\"in t?`${s(t.name)} = ${o(t.value)}`:`${s(Object.keys(t)[0])} = ${o(Object.values(t)[0])}`:e?`${s(e)} = ${o(t)}`:o(t);var n}function u({values:e}){let t=[];if(Array.isArray(e))for(var n in e){let a=e[n];t.push(l.a.createElement(\"code\",{key:a},o(a))),t.push(\" \")}else for(var a in e)t.push(l.a.createElement(\"code\",{key:a,className:\"with-info-icon\",title:e[a]},o(a))),t.push(\" \");return t}function d({name:e,path:t,values:n}){let a=\"\";return n.forEach((function(n){t&&(a+=t+\".\"),a+=m(e,n)+\"\\n\"})),l.a.createElement(\"div\",null,l.a.createElement(c.a,{className:\"language-toml\"},a))}function p({unit:e,value:t}){let n=\"\";return e&&(n=l.a.createElement(l.a.Fragment,null,\" (\",e,\")\")),l.a.createElement(l.a.Fragment,null,l.a.createElement(\"code\",null,o(t)),n)}function b({value:e}){let t=Object.keys(e)[0],n=Object.values(e)[0];return\"\"==n&&(n=null),l.a.createElement(\"span\",null,l.a.createElement(\"code\",null,l.a.createElement(\"a\",{href:\"#\"+t},t)),\" \",\"= \",l.a.createElement(\"code\",null,o(n)))}function h({defaultValue:e,enumValues:t,examples:n,groups:i,name:r,path:c,relevantWhen:s,required:o,unit:m,warnings:h}){const[f,g]=Object(a.useState)(!1);return l.a.createElement(\"ul\",{className:\"info\"},h&&h.length>0&&h.map((e,t)=>l.a.createElement(\"li\",{key:t,className:\"warning\"},l.a.createElement(\"i\",{className:\"feather icon-alert-triangle\"}),\" WARNING:\",\" \",e.text)),s&&l.a.createElement(\"li\",null,\"Only \",o?\"required\":\"relevant\",\" when:\",\" \",l.a.createElement(b,{value:s})),void 0!==e?null!==e?l.a.createElement(\"li\",null,\"Default: \",l.a.createElement(p,{unit:m,value:e})):l.a.createElement(\"li\",null,\"No default\"):null,t&&l.a.createElement(\"li\",null,\"Enum, must be one of: \",l.a.createElement(u,{values:t})),(n.length>1||n[0]!=e)&&l.a.createElement(\"li\",null,l.a.createElement(\"div\",{className:\"show-more\",onClick:()=>g(!f)},f?\"Hide examples\":\"View examples\"),f&&l.a.createElement(d,{name:r,path:c,values:n})))}t.a=function({children:e,common:t,defaultValue:n,enumValues:i,examples:c,groups:s,name:o,path:m,relevantWhen:u,required:d,templateable:p,type:b,unit:f,warnings:g}){const[v,y]=Object(a.useState)(!1);let O=e;return v&&(O=O.filter(e=>\"p\"!=e.props.originalType)),l.a.createElement(\"li\",{className:r()({\"field-required\":d,\"field-collapsed\":v}),required:d},l.a.createElement(\"div\",{className:\"badges\"},p&&l.a.createElement(\"span\",{className:\"badge badge--primary with-info-icon\",title:\"This option is dynamic and accepts the Vector template syntax\"},\"templateable\"),b&&l.a.createElement(\"span\",{className:\"badge badge--secondary\"},b,f&&l.a.createElement(l.a.Fragment,null,\" (\",f,\")\")),i&&Object.keys(i).length>0&&l.a.createElement(\"span\",{className:\"badge badge--secondary with-info-icon\",title:\"This option is an enumation and only allows specific values\"},\"enum\"),t&&l.a.createElement(\"span\",{className:\"badge badge--primary with-info-icon\",title:\"This is a popular that we recommend for getting started\"},\"common\"),d?l.a.createElement(\"span\",{className:\"badge badge--danger\"},\"required\",u&&\"*\"):l.a.createElement(\"span\",{className:\"badge badge--secondary\"},\"optional\")),O,!v&&\"table\"!=b&&l.a.createElement(h,{defaultValue:n,enumValues:i,examples:c,groups:s,name:o,path:m,relevantWhen:u,required:d,unit:f,warnings:g}))}}}]);","extractedComments":[]}