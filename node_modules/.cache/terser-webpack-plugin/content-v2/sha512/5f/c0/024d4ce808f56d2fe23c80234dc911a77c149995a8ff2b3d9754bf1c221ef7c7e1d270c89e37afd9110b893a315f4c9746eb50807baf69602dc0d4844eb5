{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{197:function(e,n,t){\"use strict\";t.r(n),t.d(n,\"frontMatter\",(function(){return i})),t.d(n,\"metadata\",(function(){return s})),t.d(n,\"rightToc\",(function(){return l})),t.d(n,\"default\",(function(){return b}));var a=t(1),r=t(6),c=(t(0),t(234)),i={sidebar_label:\"Develop a Dapp Chain\",title:\"Tutorial\\uff1a\\u4f7f\\u7528 Muta \\u6846\\u67b6\\u4ece\\u96f6\\u5f00\\u53d1\\u4e00\\u6761 Dex \\u4e13\\u6709\\u94fe\"},s={id:\"docs_zh/dev/dex\",title:\"Tutorial\\uff1a\\u4f7f\\u7528 Muta \\u6846\\u67b6\\u4ece\\u96f6\\u5f00\\u53d1\\u4e00\\u6761 Dex \\u4e13\\u6709\\u94fe\",description:\"\\u6211\\u4eec\\u7684\\u76ee\\u6807\\u662f\\u5f00\\u53d1\\u4e00\\u6761\\u94fe\\u4e0a\\u6302\\u5355\\u3001\\u94fe\\u4e0a\\u64ae\\u5408\\u3001\\u94fe\\u4e0a\\u6210\\u4ea4\\u7684\\u7b80\\u6613 dex \\u4e13\\u6709\\u94fe\\uff0c\\u65e8\\u5728\\u901a\\u8fc7 step by step \\u7684\\u6d41\\u7a0b\\uff0c\\u5e2e\\u52a9\\u5f00\\u53d1\\u8005\\u719f\\u6089 Muta \\u6846\\u67b6\\uff0c\\u5b66\\u4f1a\\u5982\\u4f55\\u4f7f\\u7528\\u6846\\u67b6\\u5f00\\u53d1\\u81ea\\u5df1\\u7684\\u533a\\u5757\\u94fe\\u3002\",source:\"@site/docs/docs_zh/dev/dex.md\",permalink:\"/new-docs/docs/docs_zh/dev/dex\",editUrl:\"https://github.com/nervosnetwork/muta/edit/master/website/docs/docs_zh/dev/dex.md\",sidebar_label:\"Develop a Dapp Chain\",sidebar:\"docs_zh\",previous:{title:\"Develop an attestation service and build a POE chain\",permalink:\"/new-docs/docs/docs_zh/dev/poe-chain\"},next:{title:\"Architecture\",permalink:\"/new-docs/docs/docs_zh/advanced/arch\"}},l=[{value:\"1. \\u601d\\u8003\\u9700\\u8981\\u7684 Service\",id:\"1-\\u601d\\u8003\\u9700\\u8981\\u7684-service\",children:[]},{value:\"2. \\u5f00\\u53d1 Asset Service\\uff0cDex Service\",id:\"2-\\u5f00\\u53d1-asset-service\\uff0cdex-service\",children:[{value:\"\\u7f16\\u5199 Asset Service\",id:\"\\u7f16\\u5199-asset-service\",children:[]},{value:\"\\u7f16\\u5199 Dex Service\",id:\"\\u7f16\\u5199-dex-service\",children:[]}]},{value:\"3. \\u5c06 Service \\u63a5\\u5165\\u6846\\u67b6\\uff0c\\u7f16\\u8bd1\\u8fd0\\u884c\\uff01\",id:\"3-\\u5c06-service-\\u63a5\\u5165\\u6846\\u67b6\\uff0c\\u7f16\\u8bd1\\u8fd0\\u884c\\uff01\",children:[]}],o={rightToc:l};function b(e){var n=e.components,t=Object(r.a)(e,[\"components\"]);return Object(c.b)(\"wrapper\",Object(a.a)({},o,t,{components:n,mdxType:\"MDXLayout\"}),Object(c.b)(\"p\",null,\"\\u6211\\u4eec\\u7684\\u76ee\\u6807\\u662f\\u5f00\\u53d1\\u4e00\\u6761\\u94fe\\u4e0a\\u6302\\u5355\\u3001\\u94fe\\u4e0a\\u64ae\\u5408\\u3001\\u94fe\\u4e0a\\u6210\\u4ea4\\u7684\\u7b80\\u6613 dex \\u4e13\\u6709\\u94fe\\uff0c\\u65e8\\u5728\\u901a\\u8fc7 step by step \\u7684\\u6d41\\u7a0b\\uff0c\\u5e2e\\u52a9\\u5f00\\u53d1\\u8005\\u719f\\u6089 Muta \\u6846\\u67b6\\uff0c\\u5b66\\u4f1a\\u5982\\u4f55\\u4f7f\\u7528\\u6846\\u67b6\\u5f00\\u53d1\\u81ea\\u5df1\\u7684\\u533a\\u5757\\u94fe\\u3002\"),Object(c.b)(\"blockquote\",null,Object(c.b)(\"p\",{parentName:\"blockquote\"},\"\\u5728\\u5f00\\u59cb\\u672c\\u6559\\u7a0b\\u4e4b\\u524d\\uff0c\\u5f00\\u53d1\\u8005\\u9700\\u8981\\u5148\\u5b66\\u4e60 \",Object(c.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"service_dev.md\"}),\"Service \\u5f00\\u53d1\\u6307\\u5357\"))),Object(c.b)(\"p\",null,\"\\u6211\\u4eec\\u6309\\u7167 \",Object(c.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"service_dev.md\"}),\"Service \\u5f00\\u53d1\\u6307\\u5357\"),\" \\u4e2d\\u63d0\\u5230\\u7684\\uff0c\\u4f7f\\u7528 Muta \\u6846\\u67b6\\u5f00\\u53d1\\u81ea\\u5df1\\u7684\\u533a\\u5757\\u94fe\\u6d41\\u7a0b\\uff0c\\u6765\\u5f00\\u53d1\\u8fd9\\u6761 dex \\u4e13\\u6709\\u94fe\\uff1a\"),Object(c.b)(\"ol\",null,Object(c.b)(\"li\",{parentName:\"ol\"},\"\\u601d\\u8003\\u81ea\\u5df1\\u94fe\\u7684\\u4e13\\u5c5e\\u9700\\u6c42\\uff0c\\u786e\\u5b9a\\u9700\\u8981\\u54ea\\u4e9b Service\"),Object(c.b)(\"li\",{parentName:\"ol\"},\"\\u5982\\u679c\\u9700\\u8981\\u7684 Service \\u6709\\u73b0\\u6210\\u7684\\uff0c\\u53ef\\u4ee5\\u76f4\\u63a5\\u590d\\u7528\\uff1b\\u5982\\u679c\\u6ca1\\u6709\\uff0c\\u53ef\\u4ee5\\u81ea\\u5df1\\u5f00\\u53d1\"),Object(c.b)(\"li\",{parentName:\"ol\"},\"\\u5c06\\u8fd9\\u4e9b Service \\u63a5\\u5165\\u6846\\u67b6\\uff0c\\u7f16\\u8bd1\\u8fd0\\u884c\\uff01\")),Object(c.b)(\"h2\",{id:\"1-\\u601d\\u8003\\u9700\\u8981\\u7684-service\"},\"1. \\u601d\\u8003\\u9700\\u8981\\u7684 Service\"),Object(c.b)(\"p\",null,\"\\u6211\\u4eec\\u4e00\\u5171\\u9700\\u8981 2 \\u4e2a Service\\uff0c\\u9664\\u4e86 Dex Service \\u5916\\uff0c\\u7531\\u4e8e Dex \\u94fe\\u9700\\u8981\\u6709\\u8fdb\\u884c\\u4ea4\\u6613\\u7684\\u8d44\\u4ea7\\uff0c\\u6240\\u4ee5\\u8fd8\\u9700\\u8981\\u4e00\\u4e2a Asset Service\\u3002\\nAsset Service \\u9664\\u4e86\\u5e38\\u89c1\\u7684\\u53d1\\u884c\\u3001\\u8f6c\\u8d26\\u3001\\u67e5\\u8be2\\u529f\\u80fd\\u5916\\uff0c\\u8fd8\\u9700\\u8981\\u4e00\\u4e2a\\u9501\\u5b9a\\u8d44\\u4ea7\\u529f\\u80fd\\u3002\\n\\u56e0\\u4e3a\\u7528\\u6237\\u53d1\\u8d77\\u6302\\u5355\\u4ea4\\u6613\\u65f6\\uff0c\\u9700\\u8981\\u9501\\u5b9a\\u7528\\u6237\\u8d44\\u4ea7\\uff0c\\u786e\\u4fdd\\u6210\\u4ea4\\u65f6\\u6709\\u8db3\\u591f\\u7684\\u4f59\\u989d\\u6765\\u5b8c\\u6210\\u4ea4\\u6613\\u3002\\nDex \\u8ba2\\u5355\\u6210\\u4ea4\\u65f6\\uff0c\\u9700\\u8981\\u4fee\\u6539\\u7528\\u6237\\u8d44\\u4ea7\\u4f59\\u989d\\uff0c\\u6240\\u4ee5 Asset Service \\u9700\\u8981\\u63d0\\u4f9b\\u4fee\\u6539\\u4f59\\u989d\\u63a5\\u53e3\\uff0c\\u5e76\\u4e14\\u8be5\\u63a5\\u53e3\\u53ea\\u80fd\\u7531 Dex Service \\u8c03\\u7528\\uff0c\\u65e0\\u6cd5\\u88ab\\u7528\\u6237\\u76f4\\u63a5\\u8c03\\u7528\\u3002\\n\\u6211\\u4eec\\u5148\\u5c06 Asset Service \\u7684\\u5bf9\\u5176\\u4ed6 Service \\u63a5\\u53e3\\u5b9a\\u4e49\\u5982\\u4e0b\\uff1a\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"\\npub trait AssetFacade {\\n    fn lock(&mut self, ctx: ServiceContext, payload: ModifyBalancePayload) -> ServiceResponse<()>;\\n\\n    fn unlock(&mut self, ctx: ServiceContext, payload: ModifyBalancePayload)\\n        -> ServiceResponse<()>;\\n\\n    fn add_value(\\n        &mut self,\\n        ctx: ServiceContext,\\n        payload: ModifyBalancePayload,\\n    ) -> ServiceResponse<()>;\\n\\n    fn sub_value(\\n        &mut self,\\n        ctx: ServiceContext,\\n        payload: ModifyBalancePayload,\\n    ) -> ServiceResponse<()>;\\n}\\n\\n\")),Object(c.b)(\"p\",null,\"\\u7136\\u540e\\u6211\\u4eec\\u5b9a\\u4e49 Asset Service \\u5bf9\\u5916\\u7684\\u63a5\\u53e3\\uff0c\\u4ee5\\u53ca\\u5185\\u90e8\\u65b9\\u6cd5\\u3002\\u6807\\u6709 \",\"[read]\",\" \\uff0c \",\"[write]\",\" \\u7684\\u65b9\\u6cd5\\u4e3a\\u5bf9\\u5916\\u65b9\\u6cd5\\u3002\\u6ca1\\u6709\\u6807\\u8bb0\\u7684\\u65b9\\u6cd5\\u4e3a\\u5185\\u90e8\\u65b9\\u6cd5\\u3002\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"#[cycles(210_00)]\\n#[write]\\nfn create_asset(\\n    &mut self,\\n    ctx: ServiceContext,\\n    payload: CreateAssetPayload,\\n) -> ServiceResponse<Asset> ;\\n\\n#[cycles(100_00)]\\n#[read]\\nfn get_asset(&self, ctx: ServiceContext, payload: GetAssetPayload) -> ServiceResponse<Asset> ;\\n\\n#[cycles(100_00)]\\n#[read]\\nfn get_balance(\\n    &self,\\n    ctx: ServiceContext,\\n    payload: GetBalancePayload,\\n) -> ServiceResponse<GetBalanceResponse>;\\n\\n#[cycles(210_00)]\\n#[write]\\nfn transfer(&mut self, ctx: ServiceContext, payload: TransferPayload) -> ServiceResponse<()>;\\n\\nfn _add_value(&mut self, payload: &ModifyBalancePayload) -> ServiceResponse<()>;\\n\\nfn _sub_value(&mut self, payload: &ModifyBalancePayload) -> ServiceResponse<()>;\\n\\n\")),Object(c.b)(\"p\",null,\"Dex Service \\u5305\\u542b\\u7684\\u529f\\u80fd\\u6709\\uff1a\"),Object(c.b)(\"ol\",null,Object(c.b)(\"li\",{parentName:\"ol\"},\"\\u589e\\u52a0\\u4ea4\\u6613\\u5bf9\"),Object(c.b)(\"li\",{parentName:\"ol\"},\"\\u67e5\\u8be2\\u4ea4\\u6613\\u5bf9\"),Object(c.b)(\"li\",{parentName:\"ol\"},\"\\u53d1\\u8d77\\u6302\\u5355\\u4ea4\\u6613\\uff08\\u4e70\\u6216\\u5356\\uff09\"),Object(c.b)(\"li\",{parentName:\"ol\"},\"\\u6bcf\\u4e2a block \\u6267\\u884c\\u7ed3\\u675f\\u540e\\uff0c\\u5339\\u914d\\u8ba2\\u5355\\u5e76\\u6210\\u4ea4\"),Object(c.b)(\"li\",{parentName:\"ol\"},\"\\u67e5\\u8be2\\u8ba2\\u5355\\u72b6\\u6001\")),Object(c.b)(\"p\",null,\"\\u529f\\u80fd 1\\u30012\\u30013\\u30015 \\u53ef\\u7531\\u7528\\u6237\\u8c03\\u7528 Servcie \\u63a5\\u53e3\\u89e6\\u53d1\\uff1a\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"#[cycles(210_00)]\\n#[write]\\nfn add_trade(&mut self, ctx: ServiceContext, payload: AddTradePayload) -> ServiceResponse<()>;\\n\\n#[read]\\nfn get_trades(&self, _ctx: ServiceContext) -> ServiceResponse<GetTradesResponse>;\\n\\n#[cycles(210_00)]\\n#[write]\\nfn order(&mut self, ctx: ServiceContext, payload: OrderPayload) -> ServiceResponse<()> ;\\n\\n#[read]\\nfn get_order(\\n    &self,\\n    _ctx: ServiceContext,\\n    payload: GetOrderPayload,\\n) -> ServiceResponse<GetOrderResponse> ;\\n\")),Object(c.b)(\"p\",null,\"\\u529f\\u80fd 4 \\u7531 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"#[hook_after]\"),\" \\u81ea\\u52a8\\u89e6\\u53d1\\uff1a\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"#[hook_after]\\nfn match_and_deal(&mut self, params: &ExecutorParams);\\n\")),Object(c.b)(\"h2\",{id:\"2-\\u5f00\\u53d1-asset-service\\uff0cdex-service\"},\"2. \\u5f00\\u53d1 Asset Service\\uff0cDex Service\"),Object(c.b)(\"p\",null,\"\\u65b0\\u5efa\\u4e00\\u4e2a cargo \\u9879\\u76ee\\uff0c\\u5728 dependency \\u4e2d\\u4f9d\\u8d56\\u5fc5\\u8981\\u7684 muta \\u7ec4\\u4ef6\\uff0c\\u53ef\\u4ee5\\u53c2\\u770b\",Object(c.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"https://github.com/nervosnetwork/muta-tutorial-dex\"}),\"\\u6e90\\u4ee3\\u7801\\u4ed3\\u5e93\")),Object(c.b)(\"p\",null,\"muta-tutorial-dex \\u76ee\\u5f55\\u7ed3\\u6784\\u5982\\u4e0b\\uff1a\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-shell\"}),\"./muta-tutorial-dex\\n\\u251c\\u2500\\u2500 Cargo.lock\\n\\u251c\\u2500\\u2500 Cargo.toml\\n\\u251c\\u2500\\u2500 LICENSE\\n\\u251c\\u2500\\u2500 README.md\\n\\u251c\\u2500\\u2500 config\\n\\u2502   \\u251c\\u2500\\u2500 chain.toml\\n\\u2502   \\u2514\\u2500\\u2500 genesis.toml\\n\\u251c\\u2500\\u2500 rust-toolchain\\n\\u251c\\u2500\\u2500 services\\n\\u2502   \\u2514\\u2500\\u2500 asset\\n\\u2502   \\u2502   \\u251c\\u2500\\u2500 Cargo.toml\\n\\u2502   \\u2502   \\u2514\\u2500\\u2500 src\\n\\u2502   \\u2502       \\u2514\\u2500\\u2500 lib.rs\\n\\u2502   \\u2514\\u2500\\u2500 dex\\n\\u2502       \\u251c\\u2500\\u2500 Cargo.toml\\n\\u2502       \\u2514\\u2500\\u2500 src\\n\\u2502           \\u2514\\u2500\\u2500 lib.rs\\n\\u2514\\u2500\\u2500 src\\n    \\u2514\\u2500\\u2500 main.rs\\n\")),Object(c.b)(\"p\",null,\"\\u53ef\\u4ee5\\u770b\\u5230\\uff0c\\u76ee\\u5f55\\u4e3b\\u8981\\u5305\\u542b config\\uff0cservices \\u548c src \\u4e09\\u4e2a\\u5b50\\u76ee\\u5f55\\uff1a\"),Object(c.b)(\"ul\",null,Object(c.b)(\"li\",{parentName:\"ul\"},\"config\\uff1a\\u94fe\\u7684\\u914d\\u7f6e\\u4fe1\\u606f\"),Object(c.b)(\"li\",{parentName:\"ul\"},\"services\\uff1a\\u5305\\u542b\\u94fe\\u7684\\u6240\\u6709 service\"),Object(c.b)(\"li\",{parentName:\"ul\"},\"src\\uff1a\\u8fd9\\u6761\\u94fe\\u7684 bin \\u76ee\\u5f55\\uff0c\\u5728 main.rs \\u4e2d\\uff0c\\u6211\\u4eec\\u5c06 services \\u63a5\\u5165 muta library\\uff0c\\u5e76\\u542f\\u52a8\\u6574\\u6761\\u94fe\")),Object(c.b)(\"blockquote\",null,Object(c.b)(\"p\",{parentName:\"blockquote\"},\"\\u6ce8\\u610f\\uff1aservices \\u76ee\\u5f55\\u4e2d\\u5e76\\u4e0d\\u5305\\u542b\\u4e86\\u4e00\\u4e2a \",\"[metadata service]\",\" \\uff0c\\u4f46\\u662f muta \\u94fe\\u542f\\u52a8\\u7684\\u65f6\\u5019\\uff0c\\u9700\\u8981\\u63d0\\u4f9b\\u4e00\\u4e2a metadata service \\u3002\\n\\u6211\\u4eec\\u9700\\u8981\\u5728 ServiceMapping \\u4e2d\\u5c06 muta package \\u5185\\u7f6e\\u7684 metadata service \\u6ce8\\u518c\\u8fdb\\u53bb\\u3002\")),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-rust\"}),'impl ServiceMapping for DefaultServiceMapping {\\n    fn get_service<SDK: \\'static + ServiceSDK, Factory: SDKFactory<SDK>>(\\n        &self,\\n        name: &str,\\n        factory: &Factory,\\n    ) -> ProtocolResult<Box<dyn Service>> {\\n        let service = match name {\\n            \"asset\" => Box::new(Self::new_asset(factory)?) as Box<dyn Service>,\\n            \"metadata\" => Box::new(Self::new_metadata(factory)?) as Box<dyn Service>,\\n            \"dex\" => Box::new(Self::new_dex(factory)?) as Box<dyn Service>,\\n            _ => panic!(\"not found service\"),\\n        };\\n\\n        Ok(service)\\n    }\\n\\n    fn list_service_name(&self) -> Vec<String> {\\n        vec![\"asset\".to_owned(), \"metadata\".to_owned(), \"dex\".to_owned()]\\n    }\\n}\\n')),Object(c.b)(\"h3\",{id:\"\\u7f16\\u5199-asset-service\"},\"\\u7f16\\u5199 Asset Service\"),Object(c.b)(\"p\",null,\"\\u5b66\\u4e60\\u5b8c \",Object(c.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"service_dev.md\"}),\"Service \\u5f00\\u53d1\\u6307\\u5357\"),\"\\uff0c\\u76f8\\u4fe1\\u8bfb\\u8005\\u5bf9\\u5982\\u4f55\\u5f00\\u53d1 asset service \\u5df2\\u7ecf\\u6709\\u4e86\\u4e00\\u5b9a\\u7684\\u60f3\\u6cd5\\uff0c\\u5e76\\u4e14\\u80fd\\u591f\\u9605\\u8bfb \",Object(c.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"https://github.com/nervosnetwork/muta-tutorial-dex/tree/master/services/asset\"}),\"asset service\"),\" \\u6e90\\u7801\\u3002\\u8fd9\\u91cc\\u5c31\\u4e0d\\u590d\\u8ff0\\u76f8\\u5173\\u5185\\u5bb9\\uff0c\\u4ec5\\u5411\\u8bfb\\u8005\\u8bf4\\u660e\\u4e00\\u4e9b\\u9700\\u8981\\u6ce8\\u610f\\u7684\\u5730\\u65b9\\uff1a\"),Object(c.b)(\"h4\",{id:\"\\u4ee3\\u7801\\u7ed3\\u6784\"},\"\\u4ee3\\u7801\\u7ed3\\u6784\"),Object(c.b)(\"p\",null,\"Service \\u7684\\u7ec4\\u4ef6\\u5b9a\\u4e49\\u5728 lib.rs \\u4e2d\\uff0c\\u7ec4\\u4ef6\\u9700\\u8981\\u7528\\u5230\\u7684\\u6570\\u636e\\u7ed3\\u6784\\uff0c\\u5982\\u8f93\\u5165\\u8f93\\u51fa\\u53c2\\u6570(\",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"TransferPayload\"),\")\\u3001\\u4e8b\\u4ef6\\u7c7b\\u578b(\",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"TransferEvent\"),\")\\u3001\\u5b58\\u50a8\\u7c7b\\u578b(\",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"Asset\"),\")\\u5b9a\\u4e49\\u5728 types.rs \\u4e2d\\u3002\"),Object(c.b)(\"h4\",{id:\"\\u521b\\u4e16\\u914d\\u7f6e\"},\"\\u521b\\u4e16\\u914d\\u7f6e\"),Object(c.b)(\"p\",null,\"Asset Service \\u901a\\u8fc7 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn init_genesis\"),\" \\u65b9\\u6cd5\\uff0c\\u6ce8\\u518c\\u4e86 Muta Tutorial Token\\uff0c\\u8be5 token \\u4fe1\\u606f\\u5c06\\u5305\\u542b\\u5728\\u521b\\u4e16\\u5757\\u7684\\u4e16\\u754c\\u72b6\\u6001\\u91cc\\uff1a\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-rust\"}),\"// lib.rs\\n#[genesis]\\nfn init_genesis(&mut self, payload: InitGenesisPayload) {\\n    let asset = Asset {\\n        id: payload.id,\\n        name: payload.name,\\n        symbol: payload.symbol,\\n        supply: payload.supply,\\n        issuer: payload.issuer.clone(),\\n    };\\n\\n    self.assets.insert(asset.id.clone(), asset.clone())?;\\n\\n    let balance = Balance {\\n        current: payload.supply,\\n        locked: 0,\\n    };\\n\\n    self.sdk.set_account_value(&asset.issuer, asset.id, balance)\\n}\\n\\n// types.rs\\n#[derive(Deserialize, Serialize, Clone, Debug)]\\npub struct InitGenesisPayload {\\n    pub id: Hash,\\n    pub name: String,\\n    pub symbol: String,\\n    pub supply: u64,\\n    pub issuer: Address,\\n}\\n\")),Object(c.b)(\"p\",null,\"\\u8be5\\u65b9\\u6cd5\\u7684\\u8f93\\u5165\\u53c2\\u6570 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"InitGenesisPayload\"),\"\\uff0c\\u5b9a\\u4e49\\u5728 muta-tutorial-dex/config/genesis.toml \\u6587\\u4ef6\\u4e2d\\uff0c\\u8be5\\u6587\\u4ef6\\u5305\\u542b\\u6240\\u6709 service \\u7684\\u521b\\u4e16\\u914d\\u7f6e\\u4fe1\\u606f\\uff1a\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-toml\"}),'# config/genesis.toml\\n[[services]]\\nname = \"asset\"\\npayload = \\'\\'\\'\\n{\\n    \"id\": \"0xf56924db538e77bb5951eb5ff0d02b88983c49c45eea30e8ae3e7234b311436c\",\\n    \"name\": \"Muta Tutorial Token\",\\n    \"symbol\": \"MTT\",\\n    \"supply\": 1000000000,\\n    \"issuer\": \"0xf8389d774afdad8755ef8e629e5a154fddc6325a\"\\n}\\n\\'\\'\\'\\n')),Object(c.b)(\"p\",null,\"\\u6846\\u67b6\\u5728\\u521b\\u5efa\\u521b\\u4e16\\u5757\\u65f6\\uff0c\\u4f1a\\u8bfb\\u53d6\\u8be5\\u914d\\u7f6e\\u5e76\\u8c03\\u7528 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn init_genesis\"),\" \\u65b9\\u6cd5\\u3002\"),Object(c.b)(\"h4\",{id:\"\\u63a5\\u53e3\\u6743\\u9650\"},\"\\u63a5\\u53e3\\u6743\\u9650\"),Object(c.b)(\"p\",null,\"Asset Service \\u7684 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn lock\"),\"\\u3001\",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn unlock\"),\"\\u3001\",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn add_value\"),\"\\u3001\",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn sub_value\"),\" \\u63a5\\u53e3\\u65b9\\u6cd5\\uff0c\\u53ea\\u80fd\\u88ab Dex Service \\u8c03\\u7528\\uff0c\\u65e0\\u6cd5\\u88ab\\u7528\\u6237\\u76f4\\u63a5\\u8c03\\u7528\\u3002\\u5728 Asset Service \\u4e2d\\u5b9a\\u4e49\\u4e86 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"ADMISSION_TOKEN\"),\"\\uff0c\\u901a\\u8fc7\\u68c0\\u9a8c\\u5728 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"ServiceContext\"),\" \\u4e2d\\u7684 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"extra\"),\" \\u5b57\\u6bb5\\u662f\\u5426\\u5305\\u542b\\u8be5\\u4ee4\\u724c\\u8fdb\\u884c\\u6743\\u9650\\u63a7\\u5236\\u3002\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-rust\"}),'const ADMISSION_TOKEN: Bytes = Bytes::from_static(b\"dex_token\");\\n')),Object(c.b)(\"h3\",{id:\"\\u7f16\\u5199-dex-service\"},\"\\u7f16\\u5199 Dex Service\"),Object(c.b)(\"p\",null,\"Dex Service \\u6e90\\u7801\\u53ef\\u4ee5\\u5728 \",Object(c.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"https://github.com/nervosnetwork/muta-tutorial-dex/tree/master/services/dex\"}),\"\\u8fd9\\u91cc\"),\" \\u627e\\u5230\\uff0c\\u6ce8\\u610f\\u4e8b\\u9879\\u540c\\u4e0a\\u3002\"),Object(c.b)(\"h2\",{id:\"3-\\u5c06-service-\\u63a5\\u5165\\u6846\\u67b6\\uff0c\\u7f16\\u8bd1\\u8fd0\\u884c\\uff01\"},\"3. \\u5c06 Service \\u63a5\\u5165\\u6846\\u67b6\\uff0c\\u7f16\\u8bd1\\u8fd0\\u884c\\uff01\"),Object(c.b)(\"p\",null,\"\\u524d\\u9762\\u5df2\\u7ecf\\u63d0\\u5230\\uff0c\\u8fd9\\u90e8\\u5206\\u5de5\\u4f5c\\u5c06\\u5728 src \\u76ee\\u5f55\\u7684 \",Object(c.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"https://github.com/nervosnetwork/muta-template/blob/master/node-template/src/main.rs\"}),\"main\"),\" \\u6587\\u4ef6\\u4e2d\\u5b8c\\u6210\\u3002\\u811a\\u624b\\u67b6\\u4e0b\\u8f7d\\u7684 main \\u6587\\u4ef6\\u5df2\\u7ecf\\u5e2e\\u6211\\u4eec\\u5b9e\\u73b0\\u4e86\\u7edd\\u5927\\u90e8\\u5206\\u4ee3\\u7801\\uff0c\\u6240\\u4ee5\\u8fd9\\u90e8\\u5206\\u5de5\\u4f5c\\u5c06\\u53d8\\u5f97\\u975e\\u5e38\\u7b80\\u5355\\u3002\"),Object(c.b)(\"p\",null,\"\\u5728\\u6a21\\u7248\\u4ee3\\u7801\\u4e2d\\uff0c\\u5b9a\\u4e49\\u4e86\\u4e00\\u4e2a \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"struct DefaultServiceMapping\"),\" \\u7ed3\\u6784\\u4f53\\uff0c\\u5e76\\u4e3a\\u8be5\\u7ed3\\u6784\\u4f53\\u5b9e\\u73b0\\u4e86 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"trait ServiceMapping\"),\"\\uff0c\\u6846\\u67b6\\u901a\\u8fc7 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"trait ServiceMapping\"),\" \\u53ef\\u4ee5\\u83b7\\u53d6\\u5230\\u6240\\u6709 service \\u5b9e\\u4f8b\\uff0c\\u4ece\\u800c\\u5c06\\u5f00\\u53d1\\u8005\\u5b9a\\u4e49\\u7684 service \\u63a5\\u5165\\u6846\\u67b6\\u5e95\\u5c42\\u7ec4\\u4ef6\\u3002\"),Object(c.b)(\"p\",null,Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"trait ServiceMapping\"),\" \\u5305\\u542b\\u4e24\\u4e2a\\u65b9\\u6cd5\\uff0c\\u4e00\\u4e2a \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn get_service\"),\" \\u7528\\u6765\\u6839\\u636e service \\u540d\\u79f0\\u83b7\\u53d6 service \\u5b9e\\u4f8b\\uff0c\\u53e6\\u4e00\\u4e2a \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn list_service_name\"),\" \\u7528\\u6765\\u83b7\\u53d6\\u6240\\u6709 service \\u540d\\u79f0\\u3002\"),Object(c.b)(\"p\",null,\"\\u9700\\u8981\\u6ce8\\u610f\\u7684\\u662f\\uff0c\\u6846\\u67b6\\u5c06\\u4f7f\\u7528\\u5728 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn list_service_name\"),\" \\u65b9\\u6cd5\\u4e2d service \\u540d\\u79f0\\u6392\\u5217\\u7684\\u987a\\u5e8f\\uff0c\\u4f9d\\u6b21\\u8c03\\u7528 service \\u4e2d \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"#[genesis]\"),\" \\u6216 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"#[hook_before]\"),\" \\u6216 \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"#[hook_after]\"),\" \\u6807\\u8bb0\\u7684\\u65b9\\u6cd5\\u3002\"),Object(c.b)(\"p\",null,\"\\u6211\\u4eec\\u9700\\u8981\\u505a\\u7684\\uff0c\\u4ec5\\u4ec5\\u662f\\u628a \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn get_service\"),\" \\u548c \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"fn list_service_name\"),\" \\u65b9\\u6cd5\\u4e2d\\u7684 service \\u96c6\\u5408\\uff0c\\u66ff\\u6362\\u6210\\u6211\\u4eec services \\u76ee\\u5f55\\u4e2d\\u5305\\u542b\\u7684 service \\u96c6\\u5408\\uff1a\"),Object(c.b)(\"pre\",null,Object(c.b)(\"code\",Object(a.a)({parentName:\"pre\"},{className:\"language-rust\"}),'impl ServiceMapping for DefaultServiceMapping {\\n    fn get_service<SDK: \\'static + ServiceSDK, Factory: SDKFactory<SDK>>(\\n        &self,\\n        name: &str,\\n        factory: &Factory,\\n    ) -> ProtocolResult<Box<dyn Service>> {\\n        let service = match name {\\n            \"asset\" => Box::new(Self::new_asset(factory)?) as Box<dyn Service>,\\n            \"metadata\" => Box::new(Self::new_metadata(factory)?) as Box<dyn Service>,\\n            \"dex\" => Box::new(Self::new_dex(factory)?) as Box<dyn Service>,\\n            _ => panic!(\"not found service\"),\\n        };\\n\\n        Ok(service)\\n    }\\n\\n    fn list_service_name(&self) -> Vec<String> {\\n        vec![\"asset\".to_owned(), \"metadata\".to_owned(), \"dex\".to_owned()]\\n    }\\n}\\n')),Object(c.b)(\"p\",null,\"\\u5230\\u8fd9\\u91cc\\uff0c\\u6240\\u6709\\u7684\\u5f00\\u53d1\\u5de5\\u4f5c\\u5c31\\u5b8c\\u6210\\u4e86\\uff0c\\u8fd0\\u884c \",Object(c.b)(\"inlineCode\",{parentName:\"p\"},\"cargo run\"),\" \\u7f16\\u8bd1\\u5e76\\u542f\\u52a8 dex \\u94fe\\u3002\"),Object(c.b)(\"p\",null,\"\\u901a\\u8fc7\\u6d4f\\u89c8\\u5668\\u6253\\u5f00 http://localhost:8000/graphiql \\uff0c\\u5373\\u53ef\\u4e0e dex \\u94fe\\u8fdb\\u884c\\u4ea4\\u4e92\\uff0cgraphiql \\u7684\\u4f7f\\u7528\\u65b9\\u6cd5\\u53c2\\u89c1\",Object(c.b)(\"a\",Object(a.a)({parentName:\"p\"},{href:\"graphql_api.md\"}),\"\\u6587\\u6863\"),\"\\u3002\"),Object(c.b)(\"blockquote\",null,Object(c.b)(\"p\",{parentName:\"blockquote\"},\"\\u6ce8\\u610f\\uff1a\\u7531\\u4e8e\\u6846\\u67b6\\u6b63\\u5728\\u6301\\u7eed\\u7684\\u5f00\\u53d1\\u8fc7\\u7a0b\\u4e2d\\uff0c\\u6240\\u4ee5\\u6846\\u67b6\\u7684 api \\u6709\\u53ef\\u80fd\\u53d1\\u751f\\u53d8\\u52a8\")))}b.isMDXComponent=!0},234:function(e,n,t){\"use strict\";t.d(n,\"a\",(function(){return p})),t.d(n,\"b\",(function(){return m}));var a=t(0),r=t.n(a);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)t=c[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=r.a.createContext({}),b=function(e){var n=r.a.useContext(o),t=n;return e&&(t=\"function\"==typeof e?e(n):s({},n,{},e)),t},p=function(e){var n=b(e.components);return r.a.createElement(o.Provider,{value:n},e.children)},d={inlineCode:\"code\",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},u=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,c=e.originalType,i=e.parentName,o=l(e,[\"components\",\"mdxType\",\"originalType\",\"parentName\"]),p=b(t),u=a,m=p[\"\".concat(i,\".\").concat(u)]||p[u]||d[u]||c;return t?r.a.createElement(m,s({ref:n},o,{components:t})):r.a.createElement(m,s({ref:n},o))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if(\"string\"==typeof e||a){var c=t.length,i=new Array(c);i[0]=u;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType=\"string\"==typeof e?e:a,i[1]=s;for(var o=2;o<c;o++)i[o]=t[o];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,t)}u.displayName=\"MDXCreateElement\"}}]);","extractedComments":[]}