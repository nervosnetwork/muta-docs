{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{243:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"frontMatter\",(function(){return u})),a.d(t,\"metadata\",(function(){return m})),a.d(t,\"rightToc\",(function(){return d})),a.d(t,\"default\",(function(){return b}));var n=a(1),l=a(6),r=(a(0),a(307)),o=a(309),i=a(310),s=a(312),c=a(311),u={last_modified_on:\"2020-07-13\",component_title:\"GeoIP\",description:\"The Vector [`geoip`](#geoip) transform accepts and outputs `log` events, allowing you to enrich events with geolocation data from the MaxMind GeoIP2 and GeoLite2 city databases.\",event_types:[\"log\"],function_category:\"enrich\",issues_url:\"https://github.com/timberio/vector/issues?q=is%3Aopen+is%3Aissue+label%3A%22transform%3A+geoip%22\",operating_systems:[\"Linux\",\"MacOS\",\"Windows\"],sidebar_label:'geoip|[\"log\"]',source_url:\"https://github.com/timberio/vector/tree/master/src/transforms/geoip.rs\",status:\"beta\",title:\"GeoIP Transform\",unsupported_operating_systems:[]},m={id:\"reference/transforms/geoip\",title:\"GeoIP Transform\",description:\"The Vector [`geoip`](#geoip) transform accepts and outputs `log` events, allowing you to enrich events with geolocation data from the MaxMind GeoIP2 and GeoLite2 city databases.\",source:\"@site/docs/reference/transforms/geoip.md\",permalink:\"/docs/reference/transforms/geoip\",editUrl:\"https://github.com/nervosnetwork/muta/edit/master/website/docs/reference/transforms/geoip.md\",sidebar_label:'geoip|[\"log\"]'},d=[{value:\"Configuration\",id:\"configuration\",children:[{value:\"database\",id:\"database\",children:[]},{value:\"source\",id:\"source\",children:[]},{value:\"target\",id:\"target\",children:[]}]},{value:\"Fields\",id:\"fields\",children:[{value:\"geoip\",id:\"geoip\",children:[]}]},{value:\"How It Works\",id:\"how-it-works\",children:[{value:\"Complex Processing\",id:\"complex-processing\",children:[]},{value:\"Environment Variables\",id:\"environment-variables\",children:[]},{value:\"Field Notation Syntax\",id:\"field-notation-syntax\",children:[]}]}],p={rightToc:d};function b(e){var t=e.components,a=Object(l.a)(e,[\"components\"]);return Object(r.b)(\"wrapper\",Object(n.a)({},p,a,{components:t,mdxType:\"MDXLayout\"}),Object(r.b)(\"p\",null,\"The Vector \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"#geoip\"}),Object(r.b)(\"inlineCode\",{parentName:\"a\"},\"geoip\")),\" transform\\naccepts and outputs \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"/docs/about/data-model/log/\"}),Object(r.b)(\"inlineCode\",{parentName:\"a\"},\"log\")),\" events, allowing you to enrich\\nevents with geolocation data from the MaxMind GeoIP2 and GeoLite2 city\\ndatabases.\"),Object(r.b)(\"h2\",{id:\"configuration\"},\"Configuration\"),Object(r.b)(s.a,{block:!0,defaultValue:\"common\",values:[{label:\"Common\",value:\"common\"},{label:\"Advanced\",value:\"advanced\"}],mdxType:\"Tabs\"},Object(r.b)(c.a,{value:\"common\",mdxType:\"TabItem\"},Object(r.b)(\"pre\",null,Object(r.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[transforms.my_transform_id]\\n  type = \"geoip\" # required\\n  inputs = [\"my-source-or-transform-id\"] # required\\n  database = \"/path/to/GeoLite2-City.mmdb\" # required\\n  source = \"ip_address\" # required\\n  target = \"geoip\" # optional, default\\n'))),Object(r.b)(c.a,{value:\"advanced\",mdxType:\"TabItem\"},Object(r.b)(\"pre\",null,Object(r.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[transforms.my_transform_id]\\n  type = \"geoip\" # required\\n  inputs = [\"my-source-or-transform-id\"] # required\\n  database = \"/path/to/GeoLite2-City.mmdb\" # required\\n  source = \"ip_address\" # required\\n  target = \"geoip\" # optional, default\\n')))),Object(r.b)(o.a,{filters:!0,mdxType:\"Fields\"},Object(r.b)(i.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"/path/to/GeoLite2-City.mmdb\"],groups:[],name:\"database\",path:null,relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h3\",{id:\"database\"},\"database\"),Object(r.b)(\"p\",null,\"Path to the MaxMind GeoIP2 or GeoLite2 binary city database file\\n(\",Object(r.b)(\"inlineCode\",{parentName:\"p\"},\"GeoLite2-City.mmdb\"),\"). Other databases, such as the the country database are\\nnot supported.\")),Object(r.b)(i.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"ip_address\",\"x-forwarded-for\",\"parent.child\",\"array[0]\"],groups:[],name:\"source\",path:null,relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h3\",{id:\"source\"},\"source\"),Object(r.b)(\"p\",null,\"The field name that contains the IP address. This field should contain a valid\\nIPv4 or IPv6 address.\\nSee \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"#field-notation-syntax\"}),\"Field Notation Syntax\"),\" for more info.\")),Object(r.b)(i.a,{common:!0,defaultValue:\"geoip\",enumValues:null,examples:[\"geoip\",\"parent.child\"],groups:[],name:\"target\",path:null,relevantWhen:null,required:!1,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h3\",{id:\"target\"},\"target\"),Object(r.b)(\"p\",null,\"The default field to insert the resulting GeoIP data into. See\\n\",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"#output\"}),\"output\"),\" for more info.\\nSee \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"#field-notation-syntax\"}),\"Field Notation Syntax\"),\" for more info.\"))),Object(r.b)(\"h2\",{id:\"fields\"},\"Fields\"),Object(r.b)(\"pre\",null,Object(r.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-javascript\",metastring:'title=\"example log event\"',title:'\"example',log:!0,'event\"':!0}),'{\\n  // ...\\n  \"geoip\": {\\n    \"city_name\": \"New York\",\\n    \"continent_code\": \"AF\",\\n    \"country_code\": \"US\",\\n    \"latitude\": \"51.75\",\\n    \"longitude\": \"-1.25\",\\n    \"postal_code\": \"07094\",\\n    \"timezone\": \"America/New_York\"\\n  }\\n  // ...\\n}\\n')),Object(r.b)(o.a,{filters:!0,mdxType:\"Fields\"},Object(r.b)(i.a,{common:!1,defaultValue:null,enumValues:null,examples:[],groups:[],name:\"geoip\",path:null,relevantWhen:null,required:!1,templateable:!1,type:\"struct\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h3\",{id:\"geoip\"},\"geoip\"),Object(r.b)(\"p\",null,\"The root field containing all geolocation data as sub-fields.\\nSee \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"#complex-processing\"}),\"Complex Processing\"),\" for more info.\"),Object(r.b)(o.a,{filters:!1,mdxType:\"Fields\"},Object(r.b)(i.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"New York\",\"Brooklyn\",\"Chicago\"],groups:[],name:\"city_name\",path:\"geoip\",relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h4\",{id:\"city_name\"},\"city_name\"),Object(r.b)(\"p\",null,\"The city name associated with the IP address.\")),Object(r.b)(i.a,{common:!0,defaultValue:null,enumValues:{AF:\"Africa\",AN:\"Antarctica\",AS:\"Asia\",EU:\"Europe\",NA:\"North America\",OC:\"Oceania\",SA:\"South America\"},examples:[\"AF\",\"AN\",\"AS\",\"EU\",\"NA\",\"OC\",\"SA\"],groups:[],name:\"continent_code\",path:\"geoip\",relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h4\",{id:\"continent_code\"},\"continent_code\"),Object(r.b)(\"p\",null,\"The continent code associated with the IP address.\")),Object(r.b)(i.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"US\",\"US-PR\",\"FR\",\"FR-BL\",\"GB\",\"A1\",\"A2\"],groups:[],name:\"country_code\",path:\"geoip\",relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h4\",{id:\"country_code\"},\"country_code\"),Object(r.b)(\"p\",null,\"The \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/ISO_3166-2\"}),\"ISO 3166-2 country codes\"),\" associated with the IP address.\")),Object(r.b)(i.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"51.75\"],groups:[],name:\"latitude\",path:\"geoip\",relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h4\",{id:\"latitude\"},\"latitude\"),Object(r.b)(\"p\",null,\"The latitude associated with the IP address.\")),Object(r.b)(i.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"-1.25\"],groups:[],name:\"longitude\",path:\"geoip\",relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h4\",{id:\"longitude\"},\"longitude\"),Object(r.b)(\"p\",null,\"The longitude associated with the IP address.\")),Object(r.b)(i.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"07094\",\"10010\",\"OX1\"],groups:[],name:\"postal_code\",path:\"geoip\",relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h4\",{id:\"postal_code\"},\"postal_code\"),Object(r.b)(\"p\",null,\"The postal code associated with the IP address.\")),Object(r.b)(i.a,{common:!0,defaultValue:null,enumValues:null,examples:[\"America/New_York\",\"Asia/Atyrau\",\"Europe/London\"],groups:[],name:\"timezone\",path:\"geoip\",relevantWhen:null,required:!0,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(r.b)(\"h4\",{id:\"timezone\"},\"timezone\"),Object(r.b)(\"p\",null,\"The timezone associated with the IP address in \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/Tz_database#Names_of_time_zones\"}),\"IANA time zone\\nformat\"),\". A full list of time zones can be found\\n\",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\"}),\"here\"),\".\"))))),Object(r.b)(\"h2\",{id:\"how-it-works\"},\"How It Works\"),Object(r.b)(\"h3\",{id:\"complex-processing\"},\"Complex Processing\"),Object(r.b)(\"p\",null,\"If you encounter limitations with the \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"#geoip\"}),Object(r.b)(\"inlineCode\",{parentName:\"a\"},\"geoip\")),\"\\ntransform then we recommend using a \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://vector.dev/components/?functions%5B%5D=program\"}),\"runtime transform\"),\".\\nThese transforms are designed for complex processing and give you the power of\\nfull programming runtime.\"),Object(r.b)(\"h3\",{id:\"environment-variables\"},\"Environment Variables\"),Object(r.b)(\"p\",null,\"Environment variables are supported through all of Vector's configuration.\\nSimply add \",Object(r.b)(\"inlineCode\",{parentName:\"p\"},\"${MY_ENV_VAR}\"),\" in your Vector configuration file and the variable\\nwill be replaced before being evaluated.\"),Object(r.b)(\"p\",null,\"You can learn more in the\\n\",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"/docs/setup/configuration/#environment-variables\"}),\"Environment Variables\"),\" section.\"),Object(r.b)(\"h3\",{id:\"field-notation-syntax\"},\"Field Notation Syntax\"),Object(r.b)(\"p\",null,\"The \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"#source\"}),Object(r.b)(\"inlineCode\",{parentName:\"a\"},\"source\")),\" and \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"#target\"}),Object(r.b)(\"inlineCode\",{parentName:\"a\"},\"target\")),\" options\\nsupport \",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"/docs/reference/field-path-notation/\"}),\"Vector's field notation syntax\"),\",\\nenabling access to root-level, nested, and array field values. For example:\"),Object(r.b)(\"pre\",null,Object(r.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[transforms.my_geoip_transform_id]\\n  # ...\\n  source = \"ip_address\"\\n  source = \"x-forwarded-for\"\\n  source = \"parent.child\"\\n  source = \"array[0]\"\\n  # ...\\n')),Object(r.b)(\"p\",null,\"You can learn more about Vector's field notation in the\\n\",Object(r.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"/docs/reference/field-path-notation/\"}),\"field notation reference\"),\".\"))}b.isMDXComponent=!0},309:function(e,t,a){\"use strict\";a(12);var n=a(0),l=a.n(n),r=a(318),o=a(317),i=a(316),s=a.n(i);t.a=function({children:e,filters:t}){const[a,i]=Object(n.useState)(!1),[c,u]=Object(n.useState)(new Set),[m,d]=Object(n.useState)(!1),[p,b]=Object(n.useState)(null);let h=[];e&&(h=Array.isArray(e)?e:[e]);let g=h.some(e=>e.props.common),f=s()(h).flatMap(e=>e.props.groups).uniq().value(),O=h.some(e=>e.props.required),j=h;return a&&(j=j.filter(e=>e.props.common)),c.size>0&&(j=j.filter(e=>Array.from(c).every(t=>e.props.groups.includes(t)))),m&&(j=j.filter(e=>e.props.required)),p&&(j=j.filter(e=>e.props.name.toLowerCase().includes(p.toLowerCase()))),l.a.createElement(l.a.Fragment,null,h.length>1&&!1!==t?l.a.createElement(\"div\",{className:\"filters\"},l.a.createElement(\"div\",{className:\"search\"},l.a.createElement(\"span\",{className:\"search--result-count\"},j.length,\" items\"),l.a.createElement(\"input\",{className:\"input--text input--lg\",type:\"text\",onChange:e=>b(e.currentTarget.value),placeholder:\"\\ud83d\\udd0d Search...\"})),l.a.createElement(\"div\",{className:\"filter\"},l.a.createElement(\"div\",{className:\"filter--choices\"},l.a.createElement(r.a,{values:f,currentState:c,setState:u}),g&&l.a.createElement(\"label\",{title:\"Only show popular/common results\"},l.a.createElement(\"input\",{type:\"checkbox\",onChange:e=>i(e.currentTarget.checked),checked:a}),\"common\"),O&&l.a.createElement(\"label\",{title:\"Only show required results\"},l.a.createElement(\"input\",{type:\"checkbox\",onChange:e=>d(e.currentTarget.checked),checked:m}),\"required\")))):null,!Array.isArray(j)||j.length>0?l.a.createElement(\"ul\",{className:\"connected-list\"},j):l.a.createElement(o.a,{text:\"no components found\"}))}},310:function(e,t,a){\"use strict\";a(12);var n=a(0),l=a.n(n),r=a(306),o=a.n(r),i=(a(307),a(315));function s(e){return e.includes(\".\")?'\"'+e+'\"':e}function c(e){return\"string\"==typeof e&&e.includes(\"\\n\")?`\"\"\"\\n${e}\\n\"\"\"`:JSON.stringify(e)}function u(e,t){return(a=t)&&a.constructor===Object?\"name\"in t&&\"value\"in t?`${s(t.name)} = ${c(t.value)}`:`${s(Object.keys(t)[0])} = ${c(Object.values(t)[0])}`:e?`${s(e)} = ${c(t)}`:c(t);var a}function m({values:e}){let t=[];if(Array.isArray(e))for(var a in e){let n=e[a];t.push(l.a.createElement(\"code\",{key:n},c(n))),t.push(\" \")}else for(var n in e)t.push(l.a.createElement(\"code\",{key:n,className:\"with-info-icon\",title:e[n]},c(n))),t.push(\" \");return t}function d({name:e,path:t,values:a}){let n=\"\";return a.forEach((function(a){t&&(n+=t+\".\"),n+=u(e,a)+\"\\n\"})),l.a.createElement(\"div\",null,l.a.createElement(i.a,{className:\"language-toml\"},n))}function p({unit:e,value:t}){let a=\"\";return e&&(a=l.a.createElement(l.a.Fragment,null,\" (\",e,\")\")),l.a.createElement(l.a.Fragment,null,l.a.createElement(\"code\",null,c(t)),a)}function b({value:e}){let t=Object.keys(e)[0],a=Object.values(e)[0];return\"\"==a&&(a=null),l.a.createElement(\"span\",null,l.a.createElement(\"code\",null,l.a.createElement(\"a\",{href:\"#\"+t},t)),\" \",\"= \",l.a.createElement(\"code\",null,c(a)))}function h({defaultValue:e,enumValues:t,examples:a,groups:r,name:o,path:i,relevantWhen:s,required:c,unit:u,warnings:h}){const[g,f]=Object(n.useState)(!1);return l.a.createElement(\"ul\",{className:\"info\"},h&&h.length>0&&h.map((e,t)=>l.a.createElement(\"li\",{key:t,className:\"warning\"},l.a.createElement(\"i\",{className:\"feather icon-alert-triangle\"}),\" WARNING:\",\" \",e.text)),s&&l.a.createElement(\"li\",null,\"Only \",c?\"required\":\"relevant\",\" when:\",\" \",l.a.createElement(b,{value:s})),void 0!==e?null!==e?l.a.createElement(\"li\",null,\"Default: \",l.a.createElement(p,{unit:u,value:e})):l.a.createElement(\"li\",null,\"No default\"):null,t&&l.a.createElement(\"li\",null,\"Enum, must be one of: \",l.a.createElement(m,{values:t})),(a.length>1||a[0]!=e)&&l.a.createElement(\"li\",null,l.a.createElement(\"div\",{className:\"show-more\",onClick:()=>f(!g)},g?\"Hide examples\":\"View examples\"),g&&l.a.createElement(d,{name:o,path:i,values:a})))}t.a=function({children:e,common:t,defaultValue:a,enumValues:r,examples:i,groups:s,name:c,path:u,relevantWhen:m,required:d,templateable:p,type:b,unit:g,warnings:f}){const[O,j]=Object(n.useState)(!1);let y=e;return O&&(y=y.filter(e=>\"p\"!=e.props.originalType)),l.a.createElement(\"li\",{className:o()({\"field-required\":d,\"field-collapsed\":O}),required:d},l.a.createElement(\"div\",{className:\"badges\"},p&&l.a.createElement(\"span\",{className:\"badge badge--primary with-info-icon\",title:\"This option is dynamic and accepts the Vector template syntax\"},\"templateable\"),b&&l.a.createElement(\"span\",{className:\"badge badge--secondary\"},b,g&&l.a.createElement(l.a.Fragment,null,\" (\",g,\")\")),r&&Object.keys(r).length>0&&l.a.createElement(\"span\",{className:\"badge badge--secondary with-info-icon\",title:\"This option is an enumation and only allows specific values\"},\"enum\"),t&&l.a.createElement(\"span\",{className:\"badge badge--primary with-info-icon\",title:\"This is a popular that we recommend for getting started\"},\"common\"),d?l.a.createElement(\"span\",{className:\"badge badge--danger\"},\"required\",m&&\"*\"):l.a.createElement(\"span\",{className:\"badge badge--secondary\"},\"optional\")),y,!O&&\"table\"!=b&&l.a.createElement(h,{defaultValue:a,enumValues:r,examples:i,groups:s,name:c,path:u,relevantWhen:m,required:d,unit:g,warnings:f}))}}}]);","extractedComments":[]}