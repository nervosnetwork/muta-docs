{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{203:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"frontMatter\",(function(){return m})),a.d(t,\"metadata\",(function(){return u})),a.d(t,\"rightToc\",(function(){return p})),a.d(t,\"default\",(function(){return b}));var n=a(1),r=a(6),l=(a(0),a(307)),s=a(309),o=a(310),i=a(312),c=a(311),m={last_modified_on:\"2020-07-13\",component_title:\"Sampler\",description:\"The Vector `sampler` transform accepts and outputs `log` events, allowing you to sample events with a configurable rate.\",event_types:[\"log\"],function_category:\"filter\",issues_url:\"https://github.com/timberio/vector/issues?q=is%3Aopen+is%3Aissue+label%3A%22transform%3A+sampler%22\",operating_systems:[\"Linux\",\"MacOS\",\"Windows\"],sidebar_label:'sampler|[\"log\"]',source_url:\"https://github.com/timberio/vector/tree/master/src/transforms/sampler.rs\",status:\"beta\",title:\"Sampler Transform\",unsupported_operating_systems:[]},u={id:\"reference/transforms/sampler\",title:\"Sampler Transform\",description:\"The Vector `sampler` transform accepts and outputs `log` events, allowing you to sample events with a configurable rate.\",source:\"@site/docs/reference/transforms/sampler.md\",permalink:\"/docs/reference/transforms/sampler\",editUrl:\"https://github.com/nervosnetwork/muta/edit/master/website/docs/reference/transforms/sampler.md\",sidebar_label:'sampler|[\"log\"]'},p=[{value:\"Configuration\",id:\"configuration\",children:[{value:\"key_field\",id:\"key_field\",children:[]},{value:\"pass_list\",id:\"pass_list\",children:[]},{value:\"rate\",id:\"rate\",children:[]}]},{value:\"How It Works\",id:\"how-it-works\",children:[{value:\"Complex Processing\",id:\"complex-processing\",children:[]},{value:\"Environment Variables\",id:\"environment-variables\",children:[]}]}],d={rightToc:p};function b(e){var t=e.components,a=Object(r.a)(e,[\"components\"]);return Object(l.b)(\"wrapper\",Object(n.a)({},d,a,{components:t,mdxType:\"MDXLayout\"}),Object(l.b)(\"p\",null,\"The Vector \",Object(l.b)(\"inlineCode\",{parentName:\"p\"},\"sampler\"),\" transform\\naccepts and outputs \",Object(l.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"/docs/about/data-model/log/\"}),Object(l.b)(\"inlineCode\",{parentName:\"a\"},\"log\")),\" events, allowing you to sample\\nevents with a configurable rate.\"),Object(l.b)(\"h2\",{id:\"configuration\"},\"Configuration\"),Object(l.b)(i.a,{block:!0,defaultValue:\"common\",values:[{label:\"Common\",value:\"common\"},{label:\"Advanced\",value:\"advanced\"}],mdxType:\"Tabs\"},Object(l.b)(c.a,{value:\"common\",mdxType:\"TabItem\"},Object(l.b)(\"pre\",null,Object(l.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[transforms.my_transform_id]\\n  type = \"sampler\" # required\\n  inputs = [\"my-source-or-transform-id\"] # required\\n  pass_list = [\"[error]\", \"field2\"] # optional, no default\\n  rate = 10 # required\\n'))),Object(l.b)(c.a,{value:\"advanced\",mdxType:\"TabItem\"},Object(l.b)(\"pre\",null,Object(l.b)(\"code\",Object(n.a)({parentName:\"pre\"},{className:\"language-toml\",metastring:'title=\"vector.toml\"',title:'\"vector.toml\"'}),'[transforms.my_transform_id]\\n  type = \"sampler\" # required\\n  inputs = [\"my-source-or-transform-id\"] # required\\n  key_field = \"message\" # optional, no default\\n  pass_list = [\"[error]\", \"field2\"] # optional, no default\\n  rate = 10 # required\\n')))),Object(l.b)(s.a,{filters:!0,mdxType:\"Fields\"},Object(l.b)(o.a,{common:!1,defaultValue:null,enumValues:null,examples:[\"message\"],groups:[],name:\"key_field\",path:null,relevantWhen:null,required:!1,templateable:!1,type:\"string\",unit:null,warnings:[],mdxType:\"Field\"},Object(l.b)(\"h3\",{id:\"key_field\"},\"key_field\"),Object(l.b)(\"p\",null,\"The name of the log field to use to determine if the event should be passed.\\nThis defaults to the \",Object(l.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"/docs/reference/global-options/#message_key\"}),\"global \",Object(l.b)(\"inlineCode\",{parentName:\"a\"},\"message_key\"),\"\\noption\"),\".\")),Object(l.b)(o.a,{common:!0,defaultValue:null,enumValues:null,examples:[[\"[error]\",\"field2\"]],groups:[],name:\"pass_list\",path:null,relevantWhen:null,required:!1,templateable:!1,type:\"[string]\",unit:null,warnings:[],mdxType:\"Field\"},Object(l.b)(\"h3\",{id:\"pass_list\"},\"pass_list\"),Object(l.b)(\"p\",null,\"A list of regular expression patterns to exclude events from sampling. If an\\nevent's key field (see \",Object(l.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"#key_field\"}),Object(l.b)(\"inlineCode\",{parentName:\"a\"},\"key_field\")),\") matches \",Object(l.b)(\"em\",{parentName:\"p\"},\"any\"),\" of these patterns it will\\n\",Object(l.b)(\"em\",{parentName:\"p\"},\"not\"),\" be sampled.\")),Object(l.b)(o.a,{common:!0,defaultValue:null,enumValues:null,examples:[10],groups:[],name:\"rate\",path:null,relevantWhen:null,required:!0,templateable:!1,type:\"uint\",unit:null,warnings:[],mdxType:\"Field\"},Object(l.b)(\"h3\",{id:\"rate\"},\"rate\"),Object(l.b)(\"p\",null,\"The rate at which events will be forwarded, expressed as 1/N. For example,\\n\",Object(l.b)(\"inlineCode\",{parentName:\"p\"},\"rate = 10\"),\" means 1 out of every 10 events will be forwarded and the rest will\\nbe dropped.\"))),Object(l.b)(\"h2\",{id:\"how-it-works\"},\"How It Works\"),Object(l.b)(\"h3\",{id:\"complex-processing\"},\"Complex Processing\"),Object(l.b)(\"p\",null,\"If you encounter limitations with the \",Object(l.b)(\"inlineCode\",{parentName:\"p\"},\"sampler\"),\"\\ntransform then we recommend using a \",Object(l.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"https://vector.dev/components/?functions%5B%5D=program\"}),\"runtime transform\"),\".\\nThese transforms are designed for complex processing and give you the power of\\nfull programming runtime.\"),Object(l.b)(\"h3\",{id:\"environment-variables\"},\"Environment Variables\"),Object(l.b)(\"p\",null,\"Environment variables are supported through all of Vector's configuration.\\nSimply add \",Object(l.b)(\"inlineCode\",{parentName:\"p\"},\"${MY_ENV_VAR}\"),\" in your Vector configuration file and the variable\\nwill be replaced before being evaluated.\"),Object(l.b)(\"p\",null,\"You can learn more in the\\n\",Object(l.b)(\"a\",Object(n.a)({parentName:\"p\"},{href:\"/docs/setup/configuration/#environment-variables\"}),\"Environment Variables\"),\" section.\"))}b.isMDXComponent=!0},309:function(e,t,a){\"use strict\";a(12);var n=a(0),r=a.n(n),l=a(318),s=a(317),o=a(316),i=a.n(o);t.a=function({children:e,filters:t}){const[a,o]=Object(n.useState)(!1),[c,m]=Object(n.useState)(new Set),[u,p]=Object(n.useState)(!1),[d,b]=Object(n.useState)(null);let f=[];e&&(f=Array.isArray(e)?e:[e]);let h=f.some(e=>e.props.common),g=i()(f).flatMap(e=>e.props.groups).uniq().value(),v=f.some(e=>e.props.required),y=f;return a&&(y=y.filter(e=>e.props.common)),c.size>0&&(y=y.filter(e=>Array.from(c).every(t=>e.props.groups.includes(t)))),u&&(y=y.filter(e=>e.props.required)),d&&(y=y.filter(e=>e.props.name.toLowerCase().includes(d.toLowerCase()))),r.a.createElement(r.a.Fragment,null,f.length>1&&!1!==t?r.a.createElement(\"div\",{className:\"filters\"},r.a.createElement(\"div\",{className:\"search\"},r.a.createElement(\"span\",{className:\"search--result-count\"},y.length,\" items\"),r.a.createElement(\"input\",{className:\"input--text input--lg\",type:\"text\",onChange:e=>b(e.currentTarget.value),placeholder:\"\\ud83d\\udd0d Search...\"})),r.a.createElement(\"div\",{className:\"filter\"},r.a.createElement(\"div\",{className:\"filter--choices\"},r.a.createElement(l.a,{values:g,currentState:c,setState:m}),h&&r.a.createElement(\"label\",{title:\"Only show popular/common results\"},r.a.createElement(\"input\",{type:\"checkbox\",onChange:e=>o(e.currentTarget.checked),checked:a}),\"common\"),v&&r.a.createElement(\"label\",{title:\"Only show required results\"},r.a.createElement(\"input\",{type:\"checkbox\",onChange:e=>p(e.currentTarget.checked),checked:u}),\"required\")))):null,!Array.isArray(y)||y.length>0?r.a.createElement(\"ul\",{className:\"connected-list\"},y):r.a.createElement(s.a,{text:\"no components found\"}))}},310:function(e,t,a){\"use strict\";a(12);var n=a(0),r=a.n(n),l=a(306),s=a.n(l),o=(a(307),a(315));function i(e){return e.includes(\".\")?'\"'+e+'\"':e}function c(e){return\"string\"==typeof e&&e.includes(\"\\n\")?`\"\"\"\\n${e}\\n\"\"\"`:JSON.stringify(e)}function m(e,t){return(a=t)&&a.constructor===Object?\"name\"in t&&\"value\"in t?`${i(t.name)} = ${c(t.value)}`:`${i(Object.keys(t)[0])} = ${c(Object.values(t)[0])}`:e?`${i(e)} = ${c(t)}`:c(t);var a}function u({values:e}){let t=[];if(Array.isArray(e))for(var a in e){let n=e[a];t.push(r.a.createElement(\"code\",{key:n},c(n))),t.push(\" \")}else for(var n in e)t.push(r.a.createElement(\"code\",{key:n,className:\"with-info-icon\",title:e[n]},c(n))),t.push(\" \");return t}function p({name:e,path:t,values:a}){let n=\"\";return a.forEach((function(a){t&&(n+=t+\".\"),n+=m(e,a)+\"\\n\"})),r.a.createElement(\"div\",null,r.a.createElement(o.a,{className:\"language-toml\"},n))}function d({unit:e,value:t}){let a=\"\";return e&&(a=r.a.createElement(r.a.Fragment,null,\" (\",e,\")\")),r.a.createElement(r.a.Fragment,null,r.a.createElement(\"code\",null,c(t)),a)}function b({value:e}){let t=Object.keys(e)[0],a=Object.values(e)[0];return\"\"==a&&(a=null),r.a.createElement(\"span\",null,r.a.createElement(\"code\",null,r.a.createElement(\"a\",{href:\"#\"+t},t)),\" \",\"= \",r.a.createElement(\"code\",null,c(a)))}function f({defaultValue:e,enumValues:t,examples:a,groups:l,name:s,path:o,relevantWhen:i,required:c,unit:m,warnings:f}){const[h,g]=Object(n.useState)(!1);return r.a.createElement(\"ul\",{className:\"info\"},f&&f.length>0&&f.map((e,t)=>r.a.createElement(\"li\",{key:t,className:\"warning\"},r.a.createElement(\"i\",{className:\"feather icon-alert-triangle\"}),\" WARNING:\",\" \",e.text)),i&&r.a.createElement(\"li\",null,\"Only \",c?\"required\":\"relevant\",\" when:\",\" \",r.a.createElement(b,{value:i})),void 0!==e?null!==e?r.a.createElement(\"li\",null,\"Default: \",r.a.createElement(d,{unit:m,value:e})):r.a.createElement(\"li\",null,\"No default\"):null,t&&r.a.createElement(\"li\",null,\"Enum, must be one of: \",r.a.createElement(u,{values:t})),(a.length>1||a[0]!=e)&&r.a.createElement(\"li\",null,r.a.createElement(\"div\",{className:\"show-more\",onClick:()=>g(!h)},h?\"Hide examples\":\"View examples\"),h&&r.a.createElement(p,{name:s,path:o,values:a})))}t.a=function({children:e,common:t,defaultValue:a,enumValues:l,examples:o,groups:i,name:c,path:m,relevantWhen:u,required:p,templateable:d,type:b,unit:h,warnings:g}){const[v,y]=Object(n.useState)(!1);let O=e;return v&&(O=O.filter(e=>\"p\"!=e.props.originalType)),r.a.createElement(\"li\",{className:s()({\"field-required\":p,\"field-collapsed\":v}),required:p},r.a.createElement(\"div\",{className:\"badges\"},d&&r.a.createElement(\"span\",{className:\"badge badge--primary with-info-icon\",title:\"This option is dynamic and accepts the Vector template syntax\"},\"templateable\"),b&&r.a.createElement(\"span\",{className:\"badge badge--secondary\"},b,h&&r.a.createElement(r.a.Fragment,null,\" (\",h,\")\")),l&&Object.keys(l).length>0&&r.a.createElement(\"span\",{className:\"badge badge--secondary with-info-icon\",title:\"This option is an enumation and only allows specific values\"},\"enum\"),t&&r.a.createElement(\"span\",{className:\"badge badge--primary with-info-icon\",title:\"This is a popular that we recommend for getting started\"},\"common\"),p?r.a.createElement(\"span\",{className:\"badge badge--danger\"},\"required\",u&&\"*\"):r.a.createElement(\"span\",{className:\"badge badge--secondary\"},\"optional\")),O,!v&&\"table\"!=b&&r.a.createElement(f,{defaultValue:a,enumValues:l,examples:o,groups:i,name:c,path:m,relevantWhen:u,required:p,unit:h,warnings:g}))}}}]);","extractedComments":[]}